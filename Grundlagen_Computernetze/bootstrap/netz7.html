<!DOCTYPE HTML PUBLIC "-;W3C;DTD HTML 4.01 Transitional;EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta NAME="robots" CONTENT="all">
<meta NAME="revisit-after" CONTENT="10 days">
<meta NAME="Reply-To" CONTENT="webmaster@netzmafia.de">

<meta NAME="keywords" CONTENT="LAN WAN TCP/IP Computernetze Ethernet Vernetzung Router Hub Switch Protokolle">
<meta NAME="description" CONTENT="Praxisorientierte Einf&uuml;hrung in den Aufbau und die Funktionsweise von Computernetzen.">
<title>Grundlagen Computernetze</title>
</head>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" ALINK="#FF0000" VLINK="#FF00FF">
<CENTER><TABLE BORDER=0 WIDTH="90%" >
<TR><TD ALIGN=LEFT><IMG SRC="eyes.gif"></TD>
<TD ALIGN=RIGHT><H2>Grundlagen Computernetze</H2>
<BR><B><I>Prof. J&uuml;rgen Plate</I></B></TD></TR>
</TABLE></CENTER>
<HR>


<h1 align=center>Repeater, Bridge, Router</h1>
<img src="repeater.jpg" align=left hspace=20 vspace=10>
Um die L&auml;ngenbeschr&auml;nkung eines Ethernet-Segmentes aufzuheben,
verwendet man Repeater. Ein klassischer Repeater verbindet zwei Ethernet-Segmente
(10Base5 oder 10Base2), er ist mit je einem Transceiver
an jedes Segment angeschlossen. Ein Remote-Repeater ist ein Repeater-Paar,
das durch einen max. 1000 m langen Lichtwellenleiter verbunden ist. In jedem
Netz d&uuml;rfen h&ouml;chstens vier Repeater vorhanden sein, man erreicht
so eine Gesamtl&auml;nge von 2500 m. Ein Remote Repeater-Paar z&auml;hlt
dabei wie ein lokaler Repeater. An den Lichtwellenleiter k&ouml;nnen keine
Ethernet-Stationen angeschlossen werden. Der Repeater ist als reines
Verst&auml;rkerelement in der untersten Schicht des OSI-Modells angesiedelt.
<P>

<H2><A NAME="7.1">Multiport-Repeater</A></H2>
Der Multiport-Repeater bietet die M&ouml;glichkeit, mehrere (typischerweise
bis zu acht) Cheapernet-Segmente zusammenzuf&uuml;hren und &uuml;ber einen
Transceiveranschlu&szlig; mit dem Standard-Ethernet zu verbinden. Bei zwei
oder mehr anzuschlie&szlig;enden Cheapernet-Segmenten ist die L&ouml;sung
kosteng&uuml;nstiger als der Einsatz von Standard-Repeatern.
<BR CLEAR=ALL>
<P>

<H2><A NAME="7.2">Hub</A></H2>
Analog dem Multiport-Repeater besteht die Funktion eines Hub darin, mehrere
Twisted-Pair-Kabelsegmente &uuml;ber einen Transceiveranschlu&szlig; mit
dem Ethernet zu verbinden. Das englische Wort "Hub" bezeichnet die Nabe
eines Speichenrades - wie die Speichen des Rades verteilen sich die
Leitungen sternf&ouml;rmig vom Hub aus. Der Begriff "Hub" steht also f&uuml;r
fast alle Verst&auml;rkerkomponenten, die eine sternf&ouml;rmige Vernetzung
erm&ouml;glichen. Hubs haben immer mehrere Ports zum Anschlu&szlig; von
mehreren Rechnern. Bei Twisted-Pair-Verkabelung ist meist einer der
Ports als "Uplink" schaltbar, d. h. es werden wie im 4. Kapitel beschrieben
die Leitungen gekreuzt. Auf diese Weise lassen sich die Hubs kaskadieren.
Typisch sind Hubs mit 4, 8, 12, 16, 24 und 32 Ports.<BR>
<P>
<center><img src="hub.gif"></center>
<P>
Manche Repeater/Hubs lassen sich &uuml;ber spezielle Busports
und in der Regel sehr kurze Buskabel verbinden. Vorteil dieser
herstellerspezifischen Kaskadierung ist, da&szlig; alle so verbundenen
Repeater/Hubs als ein Repeater bez&uuml;glich der Repeaterregel z&auml;hlen.
<P>
<center><img src="hub1.gif"></center>
<P>


<H2><A NAME="7.3">Repeaterregel (5-4-3-Regel)</A></H2>
Die Anzahl der hintereinanderschaltbaren Repeater bei 10Base5 und 10Base2
ist jedoch limitiert (Addition von Laufzeiten, Phasenverschiebungen, usw.).
Ein Remote-Repeater-Paar (10Base5, 10Base2) mit einer Punkt-zu-Punkt-Verbindung
zwischen beiden H&auml;lften wird als ein Repeater betrachtet. Weiterhin gilt:
Es d&uuml;rfen nicht mehr als f&uuml;nf (5) Kabelsegmente verbunden werden. Zur
Verbindung werden vier (4) Repeater ben&ouml;tigt und nur drei (3) der Segmente
d&uuml;rfen Rechner angeschlossen haben. Bei Ethernet (10Base5) k&ouml;nnen so
5 Segmente zu je 500 m verbunden werden, das gesamte Netz darf damit
eine Ausdehnung von 2,5 km haben.<BR>
Man kann diese Regel auch auf Twisted-Pair-Hubs anwenden - auch hier kann man nicht
beliebig viele Hubs kaskadieren. Hier ist die Leitungsl&auml;nge sogar auf ca.
100 m je Segment begrenzt. Eine Erweiterung ist durch aktive Elemente m&ouml;glich
(Switch, Router).
<P>
<center><img src="repeaterregel.gif"></center>
<P>

<H2><A NAME="7.4">Lichtwellenleiter (10BaseF, FOIRL) und Sternkoppler</A></H2>
Zur Verbindung von Geb&auml;uden werden oft Lichtwellenleiter (LWL) verwendet.
Au&szlig;erdem k&ouml;nnen mit ihnen in Geb&auml;uden l&auml;ngere Entfernungen
als mit Koaxkabeln &uuml;berbr&uuml;ckt werden.
Lichtleiter k&ouml;nnen wie TwistedPair auch im Ethernet-Verkehr nur f&uuml;r
Punkt-zu-Punkt-Verbindungen eingesetzt werden. Lichtleiter werden
zwischen Bridges, Switches und/oder Repeatern, einem Repeater und
einer einzelnen Station mit Transceiver oder zwischen zwei Stationen
mit Transceivern verwendet.<BR>
Als Industriestandard f&uuml;r Lichtleiterprodukte hatte sich urspr&uuml;nglich
<b>FOIRL</b> (<b>F</b>iber <b>O</b>ptic <b>I</b>nter<b>r</b>epeater<b>L</b>ink)
durchgesetzt. Inzwischen wurde FOIRL vom offiziellen IEEE 802.3 10BASE-FL-Standard
abgel&ouml;st, daher sollte man heute nur noch
10BASE-FL konforme Ger&auml;te einsetzen. An einem FOIRL-Segment kann ein
FOIRL-kompatibles Ger&auml;t mit einem 10BASE-FL-Transceiver gemischt
werden. In diesem Fall gelten jedoch die strengeren
FOIRL-Regeln. Normalerweise ist das eingesetzte LWL-Kabel ein
Multimode- (MMF-) Kabel mit ST- oder SC-Steckern. Die maximale L&auml;nge des
Kabels ist 2000 m beim Einsatz von 10BASE-FL-Komponenten, 1000 m bei
FOIRL.<BR>
Sternkoppler k&ouml;nnen als Verst&auml;rker betrachtet werden, jedes Datenpaket,
das von einem angeschlossenen Segment stammt, wird in alle anderen Segmente
verbreitet, einschlie&szlig;lich Kollisionen und fehlerhafter Pakete.<BR>
An einen Sternkoppler k&ouml;nnen Koax- oder Cheapernet-Segmente angeschlossen
werden. Zudem gibt es direkte Transceiver-Anschl&uuml;sse und mittlerweile
auch Anschl&uuml;sse f&uuml;r Twisted-Pair-Kabelsegmente. <BR>
<P>

<H2><A NAME="7.5">Bridge</A></H2>
Eine Bridge trennt zwei Ethernet-LANs physikalisch, St&ouml;rungen wie z.
B. Kollisionen und fehlerhafte Pakete gelangen nicht &uuml;ber die Bridge
hinaus. Die Bridge ist protokolltransparent,  d. h. sie &uuml;bertr&auml;gt
alle auf dem Ethernet laufenden Protokolle. Die beiden beteiligten Netze
erscheinen also f&uuml;r eine Station wie ein einziges Netz. Durch den Einsatz
einer Bridge k&ouml;nnen die L&auml;ngenbeschr&auml;nkungen des Ethernets
&uuml;berwunden werden, den sie verstärkt die Signale nicht nur, sondern
generiert senderseitig einen neuen Bitstrom. Die Bridge arbeitet mit derselben
&Uuml;bertragungsrate, wie die beteiligten Netze. Die Anzahl der
hintereinandergeschalteten Bridges ist auf sieben begrenzt (IEEE 802.1).
Normalerweise wird man aber nicht mehr
als vier Bridges hintereinanderschalten.
<P>
<center><IMG SRC="bridge.gif" ALT=""></center>
<P>
Jede lokale Bridge ist &uuml;ber Transceiver an zwei Ethernet-LANs angeschlossen.
Die Bridge empf&auml;ngt von beiden Netzsegmenten, mit denen sie wie jede normale
Station verbunden ist, alle Bl&ouml;cke und analysiert die Absender- und
Empf&auml;ngeradressen. Steht die Absenderadresse nicht in der
br&uuml;ckeninternen Adre&szlig;tabelle, so wird sie vermerkt. Die
Bridge lernt und speichert so die Information, auf welcher Seite der Bridge
der Rechner mit dieser Adresse angeschlossen ist. Ist die Empf&auml;ngeradresse
bekannt und der Empf&auml;nger auf derselben Seite wie der
Absender, so vewirft die Bridge das Paket (filtert es). Ist
der Empf&auml;nger auf der anderen Seite oder nicht in der
Tabelle, wird das Paket weitergeschickt.
Die intelligente Bridge lernt so selbst&auml;ndig, welche Pakete
weitergeschickt werden m&uuml;ssen und welche nicht. Bei managebaren
Bridges k&ouml;nnen zus&auml;tzliche Adre&szlig;-Filter gesetzt werden, die regeln an
welche Adressen die Bridge Informationen immer weiterschicken mu&szlig;
oder nie weiterschicken darf. Eine Bridge arbeitet auf der Ebene 2
des OSI-Schichtenmodells.<BR>
Bridges k&ouml;nnen Ethernet-Segmente auch &uuml;ber
synchrone Standleitungen, Satellitenverbindungen, Funkverbindungen, &ouml;ffentliche
Paketvermittlungsnetze und schnelle Lichtleiternetze (z.B. FDDI) verbinden. In der
Regel m&uuml;ssen solche Bridges immer paarweise eingesetzt werden.
<P>
<center><img src="remotebridge.gif" border=0></center>
<p>
Bridges sind komplette, relativ leistungsf&auml;hige Rechner mit Speicher und
mindestens zwei Netzwerkanschl&uuml;ssen. Sie sind unabh&auml;ngig von
h&ouml;heren Protokollen (funktionieren also z.B. mit TCP/IP, DECnet,
IPX, LAT, MOP etc. gleichzeitig) und erfordern bei
normalem Einsatz keine zus&auml;tzliche Software oder Programmierung.
Nach Au&szlig;en bildet ein mittels Bridge erweitertes LAN weiterhin eine Einheit,
welches eine eindeutige Adressierung bedingt. Eine Bridge interpretiert die MAC-Adressen
der Datenpakete. Weitere Features einer Bridge sind:
<ul>
<li>Ausfallsicherheit<br>
St&ouml;rungen gelangen von der einen Seite einer Bridge nicht auf die andere
Seite. Sie werden auch in diesem Sinne zum Trennen von sog. Kollisions-Dom&auml;nen
(collision domain) eingesetzt.
<li>Datensicherheit<br>
Informationen, die zwischen Knoten auf einer Seite der Bridge ausgetauscht werden,
k&ouml;nnen nicht auf der anderen Seite der Bridge abgeh&ouml;rt werden.
<li>Durchsatzsteigerung<br>
In den durch Bridges getrennten Netzsegmenten k&ouml;nnen jeweils unterschiedliche
Daten-Bl&ouml;cke gleichzeitig transferiert werden.  Hierdurch wird die
Netzperformance erh&ouml;ht. Allerdings erzeugen Br&uuml;cken dadurch, da&szlig; sie die Bl&ouml;cke
zwischenspeichern eine zus&auml;tzliche Verz&ouml;gerung und k&ouml;nnen deswegen
bei kaum ausgelasteten Netzen die Performance sogar verschlechtern.
<li>Vermeidung von Netzwerkschleifen<br>
Eine Bridge unterst&uuml;tzt den sog. "Spanning-Tree-Algorithmus", wodurch es
m&ouml;glich ist, auch Schleifen- oder Ring-Konfigurationen (= redundante Verbindungen)
im Netz zu erlauben. Die Bridges im Netz kommunizieren miteinander, im
Gegensatz zu "dummen" Repeatern oder Hubs, und stellen &uuml;ber den
Algorithmus sicher, da&szlig; bei mehreren redundanten Verbindungen immer
nur eine gerade aktiv ist.
</ul>
Weitere Kenndaten einer Bridge sind die Gr&ouml;&szlig;e der Adre&szlig;tabelle, die Filterrate,
und die Transferrate. Die Gr&ouml;&szlig;e der Adre&szlig;tabelle gibt an, wieviele Adressen
(Knoten) insgesamt in der Bridge gespeichert werden k&ouml;nnen.
Die Filterrate gibt an, wieviele Pakete pro Sekunde (packets
per second, pps) eine Bridge maximal empfangen kann. Bei voller Last
und minimaler Paketl&auml;nge k&ouml;nnen in einem Ethernet-Segment theoretisch
bis zu 14.880 Pakete pro Sekunde auftreten. Auf beiden Ports hat eine
2-Port-Bridge also insgesamt maximal 29.760 Pakete pro Sekunde zu
filtern. Alle modernen Bridges erreichen diese theoretisch m&ouml;glichen
Maximalwerte. Die Transferrate gibt an, wieviel Pakete pro Sekunde die Bridge
auf die andere Seite weiterleiten kann. Der Maximalwert ist hier
14.880 pps, da bei dieser Transferrate beide Segmente voll ausgelastet
sind.
<P>

<H2><A NAME="7.6">Switch</A></H2>
Der Switch ist wie die Bridge ein Ger&auml;t des OSI-Layers 2,
d. h. er kann LANs mit verschiedenen physikalischen Eigenschaften verbinden, z. B.
Koax- und Twisted-Pair-Netzwerke. Allerdings m&uuml;ssen, ebenso wie bei der Bridge,
alle Protokolle h&ouml;herer Ebenen 3 bis 7 identisch sein! Ein Switch ist
somit protokolltransparent. Er wird oft auch als Multi-Port-Bridge bezeichnet, da
dieser &auml;hnliche Eigenschaften wie eine Bridge aufweist.
Jeder Port eines Switch bildet ein eigenes Netzsegment. Jedem dieser Segmente
steht die gesamte Netzwerk-Bandbreite zu Verf&uuml;gung. Dadurch
erh&ouml;ht ein Switch nicht nur - wie die Bridge - die Netzwerk-Performance im Gesamtnetz,
sondern auch in jedem einzelnen Segment. Der Switch untersucht jedes durchlaufende Paket auf
die MAC-Adresse des Zielsegmentes und kann es direkt dorthin weiterleiten.
Der gro&szlig;e Vorteil eines Switches liegt nun  in der F&auml;higkeit seine
Ports direkt miteinander verschalten zu k&ouml;nnen, d. h. dedizierte Verbindungen
aufzubauen.
<P>
<center><img src="switch.jpg" border=0></center>
<p>
Was ist nun der Unterschied zwischen einem Switch und einer
Multiport-Bridge? Bei den Produkten der meisten Hersteller gibt es
keinen. "Switch" klingt nach Tempo und Leistung, deswegen haben viele
Hersteller ihre Multiport-Bridges Switches genannt. Der Begriff
Switch f&uuml;r Multiport-Bridges wurde von der Firma Kalpana (inzwischen
von Cisco aufgekauft) kreiert, da deren Produkte nicht der
IEEE-Spezifikation einer Bridge entsprachen, konnte Kalpana die
Produkte nicht Bridges nennen und hat den Namen Switch gew&auml;hlt.
Kalpana war nun sehr erfolgreich mit dem Marketing ihrer Switches.
Deswegen haben andere Hersteller ihre Bridges auch Switch,
Switch mit Bridge-Eigenschaften oder "Bridging Switch" genannt.
Switches brechen die Ethernet-Busstruktur in eine Bus-/Sternstruktur
auf. Teilsegmente mit Busstruktur werden sternf&ouml;rmig &uuml;ber je einen
Port des Switch gekoppelt. Zwischen den einzelnen Ports k&ouml;nnen Pakete
mit maximaler Ethernet-Geschwindigkeit &uuml;bertragen werden. Wesentlich
ist die F&auml;higkeit von Switches, mehrere Übertragungen zwischen
unterschiedlichen Segmenten gleichzeitig durchzuf&uuml;hren. Dadurch erh&ouml;ht
sich die Bandbreite des gesamten Netzes entsprechend.
Die volle Leistungsf&auml;higkeit von Switches kann nur dann genutzt
werden, wenn eine geeignete Netzwerktopologie vorhanden ist
bzw. geschaffen werden kann. Die Datenlast sollte nach M&ouml;glichkeit
gleichm&auml;&szlig;ig &uuml;ber die Ports verteilt werden. Systeme, die viele Daten
&uuml;bertragen, m&uuml;ssen unter Umst&auml;nden an einen eigenen Switch-Port
angeschlossen werden. Dies bezeichnet man dann als
<i>Private Ethernet</i>. Au&szlig;erdem sollte man versuchen, Systeme die viel
miteinander kommunizieren, an einen gemeinsamen Port des Switches
anzuschlie&szlig;en, um so die Datenmengen, die mehr als ein Segment
durchlaufen m&uuml;ssen, zu reduzieren.
<P>
<center><IMG SRC="switch.gif"></center>
<P>
Es haben sich drei grundlegende Realisierungsformen f&uuml;r Switches etabliert:
<UL>
<LI><I>Shared Memory:</I> Alle Schnittstellen kommunizieren &uuml;ber einen zentralen
Speicher. Bei dieser meist recht preisg&uuml;nstigen Realisierung steht oft nur ein
einfacher interner Rechnerbus zur Verf&uuml;gung.
<LI><I>Common Bus:</I> Die Schnittstellen verf&uuml;gen &uuml;ber einen lokalen Speicher
und werden &uuml;ber einen gemeinsamen Bus mit den anderen Schnittstellen verbunden. Der
interne Bus ist in der Regel schneller getaktet als die externen Schnittstellen (Zeitmultiplex)
oder erlaubt als so genannte <I>Backplane</I> mehrere parallele Verbindungen (Raummultiplex).
<P>
<center><IMG SRC="switch2.gif"></center>
<P>
<LI><I>Crosspoint Matrix:</I> Die Schnittstellen verf&uuml;gen &uuml;ber einen lokalen
Speicher und werden &uuml;ber eine flexible und leistungsf&auml;hige Schaltmatrix mit den
anderen Schnittstellen verbunden. Diese Realisierungsform erlaubt in der Regel die
h&ouml;chste Leistungsf&auml;higkeit, bedingt aber den gr&ouml;&szlig;ten
Hardwareaufwand.
<P>
<center><IMG SRC="switch3.gif"></center>
<P>
</UL>
Allgemein haben sich in der Switch-Technologie zwei Methoden der Weiterleitung
herauskristallisiert:
<ul>
<li><b>Cut-Through</b> bzw. <b>On The Fly</b><br>
Der Ethernet Switch wartet im
Gegensatz zu normalen Bridges nicht, bis er das vollst&auml;ndige Paket
gelesen hat, sondern er &uuml;bertr&auml;gt das ankommende Paket nach Empfang
der 6-Byte-Destination-Adresse. Da nicht das gesamte Paket bearbeitet
werden mu&szlig;, tritt eine Zeitverz&ouml;gerung von nur etwa 40 Mikrosekunden
ein. Sollte das Zielsegment bei der Übertragung gerade belegt sein,
speichert der Ethernet Switch das Paket entsprechend zwischen.
Bei den Switches werden, im Gegensatz zu Bridges, mit Ausnahme von
short frames (Pakete, die kleiner als die minimal zul&auml;ssigen 64 Bytes
sind), fehlerhafte Pakete auch auf das andere Segment
&uuml;bertragen. Grund hierf&uuml;r ist, da&szlig; die CRC-Pr&uuml;fung (Cyclic Redundancy
Check) erst bei einem vollst&auml;ndig gelesenen Paket durchgef&uuml;hrt werden kann.
Solange der Prozentsatz von fehlerhaften Paketen im Netz gering ist,
entstehen keine Probleme. Sobald aber (z.B. aufgrund eines
Konfigurationsfehlers, fehlerhafter Hardware oder extrem hoher
Netzlast bei gleichzeitig langen Segmenten mit mehreren Repeatern) der
Prozentsatz der Kollisionen steigt, k&ouml;nnen Switches auch dazu f&uuml;hren,
da&szlig; die Leistung des Gesamtnetzes deutlich sinkt.
Cut-Through-Switching bietet dann einen Vorteil, wenn man sehr geringe Verz&ouml;gerungen
bei der &Uuml;bertragung zwischen einzelnen Knoten ben&ouml;tigt. Diese Technologie sollte
also eingesetzt werden, wenn es darum geht, in relativ kleinen Netzen eine
gro&szlig;e Anzahl Daten zwischen wenigen Knoten zu &uuml;bertragen.
<li><b>Store-and-Forward</b><br>
Die Switches dieser Kategorie untersuchen im Gegensatz zu den vorher erw&auml;hnten
das gesamte Datenpaket. Dazu werden die Pakete kurz zwischengespeichert,
auf ihre Korrektheit und G&uuml;ltigkeit &uuml;berpr&uuml;ft und anschlie&szlig;end
verworfen oder weitergeleitet. Einerseits hat dies den Nachteil der
gr&ouml;&szlig;eren Verz&ouml;gerung beim Weiterschicken des Paketes, andererseits
werden keinerlei fehlerhafte Pakete auf das andere Segment &uuml;bertragen.
Diese L&ouml;sung ist bei gr&ouml;&szlig;eren Netzen mit vielen Knoten
und Kommunikationsbeziehungen besser, weil nicht einzelne fehlerhafte
Segmente durch Kollisionen das ganze Netz belasten k&ouml;nnen. Bei diesen
Anwendungen ist die Gesamttransferrate entscheidend, die Verz&ouml;gerung wirkt
sich hier kaum aus.
</ul>
<P>
<center><img src="switches.gif" border=0></center>
<p>
Inzwischen sind Switching-Produkte (z.B. von 3Com, Cisco oder Allied
Telesyn) am Markt, die beide Technologien unterst&uuml;tzen. Dies geschieht
entweder per Konfiguration (Software) oder automatisch anhand der
CRC-Fehler-H&auml;ufigkeit. Wird eine vorgegebene Anzahl von fehlerhaften Paketen
&uuml;berschritten, schaltet der Switch automatisch von "Cut Through" auf
"Store and Forward" um.
<P>
Die Performance eines Netzes kann man auf Basis vorhandener
Standalone-Switches erh&ouml;hen, indem zus&auml;tzliche
Switches &uuml;ber die Ethernetports kaskadiert werden.
Alle Switches erlauben die Kaskadierung &uuml;ber einen einzelnen
Ethernet-Port mit einer maximalen Transferrate von 10 Mbit/s (bzw. 100 Mbit/s
bei Fast Ethernet Switches). Kann man das Netz in Teilnetze unterteilen, zwischen
denen diese Transferrate ausreicht, ist dies eine sinnvolle L&ouml;sung.
Doch meistens ist das nicht der Fall.
Die n&auml;chste und wohl beste M&ouml;glichkeit der Kopplung von Switches ist der
Einsatz von Produkten, die den Anschlu&szlig; an einen High Speed Backbone
erlauben. Im Gegensatz zu kaskadierten Standalone-Switches k&ouml;nnen weitere
Ger&auml;te an den Backbone geh&auml;ngt werden, ohne da&szlig; Ports
f&uuml;r die Switch-zu-Switch-Verbindung verlorengehen. Eine Backbone-L&ouml;sung
ist nicht nur schneller und flexibler sondern f&uuml;r gro&szlig;e Netze auch
kosteng&uuml;nstiger. Man mu&szlig; unterscheiden zwischen L&ouml;sungen, die eine
herstellereigene Verbindung benutzen (propriet&auml;r) und solchen, die auf
einen Standard wie Fast Ethernet, Gigabit Ethernet, FDDI oder ATM setzen.
<P>
<I>Unterschiede Hub - Switch:</I>
<P>
<b>Hub</b>
<UL>
<li>Es kann immer nur ein Datenpaket nach dem anderen den Hub passieren
 <li>Geschwindigkeit 10 oder 10/100 Mbps bei Dual Speed Hubs
 <li>Hubs wissen nicht, an welchem Port welche Station angeschlossen ist,
   sie k&ouml;nnen es auch nicht lernen. Hubs m&uuml;ssen nicht konfiguriert werden.
</UL>
<P>
<b>Switch</b>
<UL>
<li>Mehrere Datenpakete k&ouml;nnen den Switch gleichzeitig passieren
 <li>Die Gesamtbandbreite (der Datendurchsatz) ist  wesentlich h&ouml;her als bei einem Hub
 <li>Switches lernen nach und nach, welche Stationen mit welchen Ports verbunden
   sind, somit werden bei weiteren Daten&uuml;bertragungen keine anderen Ports
   unn&ouml;tig belastet, sondern nur der Port, an dem die Zielstation angeschlossen ist
 <li>Geschwindigkeiten sind heute 10, 10/100 oder 1000 MBit/s (Gigabit Ethernet)
 <li>Switches m&uuml;ssen nicht konfiguriert werden
 <li>inzwischen preisg&uuml;nstiger als Hubs
</UL>
<P>
<I>Eine oft gestellte Glaubensfrage:</I>
"In der Literatur und im Web finde ich immer wieder die Bemerkung, dass ein Hub 
nur Half-Duplex-&Uuml;bertragung erm&ouml;gliche, ein Switch dagegen aber Full-Duplex.
Das kann ich nicht glauben. Vorausgesetzt, der Hub ist ein Signalverst&auml;rker, an 
den die Ger&auml;te mit zwei Aderpaaren (RX und TX) angeschlossen sind."
<P>
F&uuml;r die Antwort betrachten wir das Ganze aus angemessener Distanz:
Ein Hub ist nach wie vor ein Verst&auml;rker, der alles, was an einem Port reinkommt 
auf allen(!) Ports wieder ausgibt - egal wie's kommt. Dann gibt der Hub die empfangenen 
Impulse aber auch an dem Port aus, an dem sie gerade reinkommen. Wenn jetzt 
eine Kommunikation zwischen zwei Knoten an beispielsweise den 
Ports 1 und 2 stattfindet und Knoten 1 sendet, dann bekommt er sein 
logischerweise auch eigenes Geschw&auml;tz zu h&ouml;ren. Wenn dann noch der 
Knoten 2 sendet, gibt's eine Kollision. Also muss Knoten 2 still sein, wenn Knoten 1
sendet und umgekeht - das ist aber dann doch nur halbduplex.
<p>
Der Switch schaltet einen "Kanal" zwischen zwei Ports, die anderen
bleiben aussen vor und daher kann er tats&auml;chlich vollduplex fahren
(bis die Last soweit steigt, das er in den Hub-Modus schaltet und 
alles wieder egal ist).
<p>

<H4>Latenzzeiten von Ethernet Switches</H4>

Aufgrund der Arbeitsweise unterscheiden sich das Cut-Through-Verfahren
und Store-and-Foreward-Verfahren in ihren Latenzzeiten.

Der Cut-Through-Switch benutzt die Zieladresse als ein Entscheidungskriterium,
um einen Zielport aus einer Adresstabelle zu erhalten. Nach der Bestimmung
des Zielports wird eine Querverbindung durch den Switch geschaltet, und
der Frame wird zum Zielport geleitet
Da diese Switching-Methode nur die Speicherung eines kleinen Teils des Frames
erfordert, bis der Switch f&auml;hig ist, die Zieladresse zu erkennen und den
Switching-Vorgang einzuleiten, ist die Latenzzeit in diesem Fall nur minimal.
Die Latenzzeit f&uuml;r einen 10-Mbps-Ethernet-Frame berechnet sich wie folgt:
Der Switch muss zun&auml;chst 14 Bytes einlesen (8 Bytes f&uuml;r die Pr&auml;ambel und
6 Bytes f&uuml;r die Zieladresse). F&uuml;r die Latenzzeit T<sub>L</sub> eines Cut-Through
Ethernet-Switches ergibt sich
<P><UL><B>
T<sub>L</sub> = T<sub>IG</sub> + 14*8*T<sub>BK</sub> [&micro;s]
</B></UL><P>
Mit einem Interframe-Gap von T<sub>IG</sub> = 9,6 &micro;s und einer
Bitdauer von T<sub>BK</sub> = 0,1 &micro;s:
<P><UL><B>
T<sub>L</sub> =  9,6 + 14*8*0,1 = 9,6 + 11,2 = 20,8 &micro;s
</B></UL><P>
Ein Store-and-Forward-Switch speichert erst den gesamten Frame, bevor die
Verarbeitung der Datenfelder des Frames beginnt. Wenn der gesamte  Frame im
Zwischenspeicher angekommen ist, wird ein CRC-Check durchgef&uuml;hrt, optional auch
weitere Filteraktionen. Ist der Frame fehlerfrei, wird er von Zwischenspeicher
zum Zielport geleitet, anderenfalls verworfen. F&uuml;r die Latenzzeit T<sub>L</sub> eines
Ethernet Store-and-Foreward Switches gilt also theoretisch mit der Framegr&ouml;&szlig;e FG:
<P><UL><B>
T<sub>L</sub> = T<sub>IG</sub> + FG*8*T<sub>BK</sub> [&micro;s]
</B></UL><P>
Da die minimale Gr&ouml;&szlig;e eines 10-Mbps-Ethernet-Frames 72 Bytes betr&auml;gt, gilt f&uuml;r
die minimale Latenzzeit TL<sub>min</sub> eines Store-and-Foreward
Ethernet-Switches:
<P><UL><B>
T<sub>L</sub> = T<sub>IG</sub> + 72*8*T<sub>BK</sub> [&micro;s]
</B></UL><P>
Mit einem Interframe-Gap von T<sub>IG</sub> = 9,6 &micro;s und einer
Bitdauer von T<sub>BK</sub> = 0,1 &micro;s ergibt sich:
<P><UL><B>
T<sub>L</sub> =  9,6 + 72*8*0,1 = 67,2 &micro;s
</B></UL><P>
Aufgrund der Speicherung des gesamten Frames ist die Latenzzeit beim
Store-and-Foreward Switching abh&auml;ngig von der Framegr&ouml;&szlig;e, so da&szlig;
f&uuml;r Frames maximaler Gr&ouml;&szlig;e (1526 Bytes) gilt:
<P><UL><B>
T<sub>L</sub> =  9,6 + 1526*8*0,1 = 1,23 ms
</B></UL>
<P>

<h4>Mehrere Verbindungen zwischen zwei Switches</h4>
Normalerweise werden zwei Switches mit einem Patchkabel verbunden. Manchmal haben Switches 
hierfür einen eigenen Hochgeschwindigkeits-Port oder einen Glasfaseranschluß, damit die
Backbone-Verbindung keinen Flaschenhals bildet. Eine andere Möglichkeit stellt das
Opfern einiger Anschlüsse dar, um die Switches durch mehrere Kabel miteinander
zu koppeln. Damit das klappt müssen die beiden Geräte eine "Link Aggregation" nach IEEE 802.3ad 
beherrschen (auch "Port Trunking" oder "Channel Bundling" genannt). Damit aus zwei oder mehr
Verbindungsleitungen eine einzige logische Verbindung wird, gibt es auf Layer 2 als
Erweiterung den "Link Aggregation Control Layer" (LACL). Die Switches transportieren
die Daten mittels des "Link Aggregation Control Protocols" (LACP). Die Kabel-Redundanz 
bietet sogar noch einen weiteren Vorteil: fällt ein Kabel aus, reduziert sich zwar
die Geschwindigkeit, die Strecke selbst bleibt aber erhalten. Die Gesamtgeschwindigkeit 
ergibt sich als Summe der Geschwindigkeiten der einzelnen Ports, die alle gleich schnell
sein und sich im Vollduplexmodus befinden müssen. "Link Aggregation" kann man auch
einsetzen, wenn aus einem besonderen Anlaß temporär eine höhere Übertragungsbandbreite 
benötigt wird. 
<P>

<H2><A NAME="7.7">Router</A></H2>
Gro&szlig;e Netzwerke wie das Internet bestehen aus vielen kleineren
Teilnetzwerken. Die Verbindung der verschiedenen Netze
wird durch spezielle Rechner hergestellt. Das sind, neben Bridges, Switches
und Gateways, im Internet vor allem Router. Diese haben die Aufgabe, Daten
zwischen Rechnern in verschiedenen Netzen auf m&ouml;glichst g&uuml;nstigen
Wegen weiterzuleiten. Zum Beispiel wenn Rechner 1 im Netz B Daten an Rechner
2 im Netz C schicken m&ouml;chte.
<P>
<CENTER><IMG SRC="router0.gif"></CENTER>
<P>
Router verbinden, im Gegensatz zu Bridges, in OSI-Schicht 3 auch
Netze unterschiedlicher Topologien. Sie sind Dreh- und Angelpunkt in
strukturiert aufgebauten LAN- und WAN-Netzen. Mit der F&auml;higkeit,
unterschiedliche Netztypen sowie unterschiedliche Protokolle zu
routen, ist eine optimale Verkehrslenkung und Netzauslastung
m&ouml;glich. Routing wird erst dann erforderlich, wenn Kommunikation
zwischen Stationen in unterschiedlichen Subnetzen erfolgen soll.
Sie sind nicht protokolltransparent, sondern m&uuml;ssen in der Lage
sein, alle verwendeten Protokolle zu erkennen, da sie
Informationsbl&ouml;cke protokollspezifisch umsetzen.
Klassische Beispiele in Heim- und KMU-Netzen sind die ISDN- oder DSL-Router,
welche die Verbindung zum Provider herstellen.
<P>
<center><IMG SRC="router1.gif" ALT=""></center>
<P>

Router operieren in der Ebene 3 des OSI-Referenzmodells. Sie verbinden
Netzwerke über die entsprechenden Netzwerkprotokolle. Sie erm&ouml;glichen
die Zerlegung großer Netzwerke in kleinere Verwaltungseinheiten.
Sie leiten Datenpakete der Netzwerkschicht weiter (forwarding) und treffen
Entscheidungen &uuml;ber Wegewahl und Erreichbarkeit zu anderen Netzwerken
(routing). Der Router muß dafür die Adressierungsstruktur
in der Netzwerkschicht kennen.


Bevor ein Router ein Paket mit einer bestimmten IP-Adresse weiterleiten
kann, mu&szlig; er f&uuml;r diese Adresse zun&auml;chst den Weg durch das
Netz zum Zielrechner bestimmen. Das geschieht mit Hilfe spezieller Protokolle
wie ARP, RIP, OSPF, EGP/BGP. Er ist jedoch von der Schicht 2 unabhängig
und kann deswegen verschiedene Schicht-2-Welten (zum Beispiel Ethernet und
Token Ring) miteinander verbinden. Ein Router unterscheidet sich u.a. von
einer Bridge darin, dass die Bridge für die Netzwerkteilnehmer
völlig transparent ist, während die Adresse eines Routers jedem Host im
Netzwerk explizit bekannt sein muß, wenn er dessen Dienste nutzen will.
Ein Router kann einen von mehreren potentiellen Wegen zur Weiterleitung
der Daten aussuchen, wobei er seine Entscheidung mit Hilfe von Parametern,
wie zum Beispiel Übertragungszeiten, Knotenlast oder auch nur einfach
Knotenanzahl, trifft. Wie Router die Wegeentscheidung treffen, hängt
wesentlich vom konkreten Protokoll der Schicht 3 ab.<BR>
In der Routingtabelle ist aber nicht der gesamte Weg zu einem Rechner
mit einer bestimmten IP-Adresse gespeichert. Vielmehr kennt der einzelne
Router nur die n&auml;chste Zwischenstation (engl. next hop) auf dem Weg
zum Ziel. Das kann ein weiterer Router oder der Zielrechner sein.
<P>
<H4>Grundlegende Komponenten von Routern</H4>
Der Router besteht, wie ein Computer auch, aus CPU und Speicher. Dazu kommen
mehrere Netzwerkadapter, die eine Verbindung zu jenen Netzen herstellen, die
mit dem Router verbunden sind. Die Adapter sind meist &uuml;ber einen Systembus mit
der CPU des Routers verbunden. Die CPU wiederum h&auml;lt im Hauptspeicher
des Rechners die Routingtabelle vor.
<P>
<CENTER><IMG SRC="router2.gif"></CENTER>
<P>
<I>LAN Interfaces</I>:<BR>
Die meisten Router haben ein oder mehrere LAN-Interfaces, je nach
Topologie f&uuml;r Token-Ring, Ethernet, 100BASE-T Fast Ethernet, FDDI oder
auch ATM. F&uuml;r den Anschlu&szlig; entsprechender Medien sind entweder
alternativ nutzbare Ports (z.B. Ethernet AUI, BNC, RJ45) vorhanden
oder der Anschlu&szlig; ist als Einschub realisiert und kann daher den
Erfordernissen angepa&szlig;t werden.
<P>
<I>WAN Interfaces</I>:<BR>
WAN-Leitungen werden von unterschiedlichen Anbietern mit
unterschiedlichen Geschwindigkeiten angeboten. Entsprechend variieren
die Kosten und die Schnittstellen.
F&uuml;r kleinere Anbindungen (z.B. Workgroups) werden Verbindungen mit
einer Übertragungsgeschwindigkeit von 64 Kbit/s empfohlen. Es gibt
nat&uuml;rlich Applikationen, wo eine geringere Übertragungsrate
ausreicht. Werden h&ouml;here Übertragungsraten ben&ouml;tigt, so bietet sich
die in Europa &uuml;bliche E1-Verbindung (im Prinzip ein ISDN
Prim&auml;rmultiplexanschlu&szlig;) mit einer Übertragungsrate von 2048 kbit/s an.
Router haben einen oder mehrere WAN-Ports, die entweder fest eingebaut
sind oder bei modularen Modellen mit entsprechenden Schnittstellenmodulen
aufger&uuml;stet werden k&ouml;nnen.
Übliche physikalische Schnittstellen f&uuml;r Synchronbetrieb sind RS449,
V.35 und X.21, f&uuml;r asynchronen Betrieb das RS232-Interface.
F&uuml;r den Anschlu&szlig; an ISDN wird die S0-Schnittstelle verwendet.
<P>
<center><img src="routerb.gif" border=0></center>
<p>

<H3>Routing</H3>
Da, wie gesagt, Routing auf Schicht 3 stattfindet, wird in diesem Abschnitt
auf das Internet-Protocol vorgegriffen (siehe Kapitel 10:
<a href="netz8.html">10 TCP/IP</a>).<BR>
Wenn einer der Netzwerkadapter ein Datenpaket erh&auml;lt, so verarbeitet
er zun&auml;chst die Schicht-2-Protokolldaten, extrahiert dann das IP-Paket
und reicht es zur weiteren Verarbeitung an die CPU weiter. Diese entnimmt
dem Paketkopf die IP-Adresse des Zielrechners. Wenn nicht der Router selber
adressiert ist, mu&szlig; das Paket weitergeleitet werden. Dazu sucht die
CPU in der Routingtabelle nach der passenden Next-Hop-Information. Die
Next-Hop-Information beinhaltet zum einen die Nummer des Netzwerkadapters
&uuml;ber den das Paket ausgegeben werden soll und zweitens die IP-Adresse
des Next-Hop. Diese Adresse &uuml;bergibt die CPU des Routers nun zusammen
mit dem IP-Paket an den entsprechenden Netzwerkadapter. Dieser generiert daraus
ein Schicht-2-Paket und sendet es ab.
<P>
Werden auch Informationen im Kopf des Datagramms vor dem Weiterleiten geändert?
Zun&auml;chst einmal wird bei Eintreffen eines IP-Datagrammes &uuml;berpr&uuml;ft,
ob die Pr&uuml;fsumme mit den Daten des Paketes zusammenpasst. Wenn dies nicht
der Fall ist, mu&szlig; der Router eine Fehlermeldung an den Absender schicken.
Anschlie&szlig;end wird der Z&auml;hler "time-to-live" im Kopf des Paketes
dekrementiert. Erreicht er den Wert 0, wird das Paket verworfen. Auf diese
Weise k&ouml;nnen Endlosschleifen vermieden werden. Da sich der Inhalt des
Paketes deswegen ver&auml;ndert hat, mu&szlig; eine neue Pr&uuml;fsumme
berechnet werden. Das neue Datagramm wird nun weitergeleitet. Ist eine lokale
Auslieferung m&ouml;glich, ist die physikalische Zieladresse die MAC-Adresse
des IP-Zieles. Im Falle einer indirekten Auslieferung ist die physikalische
Zieladresse die MAC-Adresse des Routers.
Also ist die Information &uuml;ber den Router nicht im Kopf eines IP-Paketes
vermerkt. Der Weg eines Datagrammes kann also nicht verfolgt werden.
<P>
Bevor ein Router ein Paket mit einer bestimmten IP-Adresse weiterleiten
kann, mu&szlig; er ggf. f&uuml;r diese Adresse zun&auml;chst den Weg durch das
Netz zum Zielrechner bestimmen. Das geschieht mit Hilfe spezieller Protokolle
wie ARP, RIP, OSPF, EGP/BGP.
<P>
<TABLE BORDER=0 CELLPADDING=8>
<TR>
<TD VALIGN=TOP><img src="netbsp-1.gif"></TD>
<TD VALIGN=TOP>Betrachten wir dazu ein stark vereinfachendes Beispiel. Dabei werden lokale
Netze im folgenden nur noch als gelbe Ovale dargestellt. Innerhalb eines lokalen Netzes
hat jeder Rechner eine eigene IP-Adresse. Zwei Netze werden miteinander &uuml;ber
Router (rotes Rechteck) gekoppelt.</TD>
</TR><TR>
<TD VALIGN=TOP>Bei der Verbindung von mehr als zwei Netzen existieren Knotenpunkte, an
denen eine Richtungsentscheidung getroffen werden mu&szlig;. Router mit mehreren
Interfaces legen den Weg eines Paketes durch das Netz fest. Es ginge im
Prinzip auch nur mit einem Interface - aber auf Kosten der Performance.</TD>
<TD VALIGN=TOP><img src="netbsp-2.gif"></TD>
</TR><TR>
<TD VALIGN=TOP><img src="netbsp-3.gif"></TD>
<TD VALIGN=TOP>Das Konzept wird rasch an vielen Stellen umgesetzt. Es entstehen miteinander
gekoppelte Netze. Aber noch haben nicht alle Netze miteinander eine Verbindung.</TD>
</TR><TR>
<TD VALIGN=TOP>Durch weitere Verbindungen haben nun alle Netze Kontakt. Jeder Rechner kann
mit jedem anderen Rechner kommunizieren, auch wenn sie nicht in zwei benachbarten
Netzen liegen.</TD>
<TD VALIGN=TOP><img src="netbsp-4.gif"></TD>
</TR><TR>
<TD VALIGN=TOP><img src="netbsp-5.gif"></TD>
<TD VALIGN=TOP>Durch Querverbindungen entsteht ein vermaschtes System. Auch wenn eine der
Verbindungen ausf&auml;llt, kann die Kommunikation weiterlaufen. </TD>
</TR>
</TABLE>
<P>
Durch die f&uuml;r das Routen notwendige Untersuchung des Datenpakets,
erh&ouml;ht sich die Verweilzeit der Daten im Router selbst (Latenzzeit).
Die eigentliche St&auml;rke von Routern liegt in ihrer F&auml;higkeit
mittels bestimmter Algorithmen den bestm&ouml;glichen Weg f&uuml;r ein
Datenpaket zum Empf&auml;nger aus seiner Routing-Tabelle zu w&auml;hlen.<BR>
Um die Daten "routen" zu k&ouml;nnen, ist es notwendig, da&szlig; der Router alle
angeschlossenen Netzwerkprotokolle versteht und diese auch die F&auml;higkeit des
Routens unterst&uuml;tzen. Der Vorteil des Routers gegen&uuml;ber der Bridge ist
die logische Trennung und die Bildung von (Sub-)Netzen bei TCP/IP bzw. von Areas
bei DECNET. <br>
Weitere Features von Routern sind ihre Netzwerk-Management- und die Filter-Funktionen.
Durch geeignet gew&auml;hlte Routing-Einstellungen ist es m&ouml;glich, die
Netwerk-Performance je nach Anforderungen ans Netz zu verbessern. Die Filterfunktionen
auf Netzwerk-Protokollebene sind &auml;hnlich wie bei der Bridge. Router bieten aber
eine generell h&ouml;here Isolation da sie z. B. Broadcasts in der Regel nicht weiterleiten.
Au&szlig;erdem k&ouml;nnen sie zus&auml;tzlich als "screening Router"  verwendet werden,
indem z. B. bestimmten IP-Adressen der Zugriff auf bestimmte Netzteile verwehrt wird.
Aus den erw&auml;hnten Gr&uuml;nden sind Router in der Regel per Software konfigurierbar.
<P>
Bei Hochgeschwindigkeitsnetzen im Gigabitbereich ist die oben beschriebene
Struktur eines Routers nicht mehr ausreichend. Die CPU und der Systembus
m&uuml;&szlig;ten dabei die Summe der &Uuml;bertragungsraten aller angeschlossenen
Netzwerke verarbeiten k&ouml;nnen. Bei 2 GBit/s Daten&uuml;bertragungsgeschwindigkeit
entspricht das bei einer angenommenen Paketgr&ouml;&szlig;e von 1000 Bits bis
zu zwei Millionen IP-Paketen pro Sekunde und Netzwerkanschlu&szlig;. Bei solchen
Hochleistungsroutern geht man dazu &uuml;ber, die Aufgabe des Weiterleitens von
IP-Paketen den einzelnen Netzwerkadaptern zu &uuml;bertragen. Die Netzwerkadapter
erhalten zu diesem Zweck eine eigene CPU und Speicher, in dem sich eine Kopie der
zentralen Routingtabelle des Routers befindet. Trifft bei diesem Routermodell
ein IP-Paket bei einem der Adapter ein, bestimmt dieser den Next-Hop und
gibt das Paket direkt an den entsprechenden Ausgangsadapter weiter. Die
CPU des Routers ist nur noch f&uuml;r die Ausf&uuml;hrung der Routingprotokolle
und die Verwaltung der zentralen Routingtabelle sowie anderer administrativer
Aufgaben zust&auml;ndig. Die zentrale Routingtabelle wird im Fall einer
&Auml;nderung anschlie&szlig;end in die Speicher der einzelnen Netzwerkadapter
kopiert.
<P>

<H3>Die Routingtabelle</H3>
Eine einfache Tabelle &uuml;ber alle 2<SUP>32</SUP> (bei IPv4) bzw.
2<SUP>128</SUP> (bei IPv6) m&ouml;glichen IP-Adressen w&auml;re
kaum machbar. Schlie&szlig;lich kann ein Router &uuml;ber die
direkt mit ihm verbundenen Netze nur maximal einige tausend Rechner erreichen.
In der Regel sind es sogar weniger als hundert.
In der Routingtabelle ist auch nicht der gesamte Weg zu einem
Rechner mit einer bestimmten IP-Adresse gespeichert. Vielmehr kennt der einzelne
Router nur die n&auml;chste Zwischenstation (engl. next hop) auf dem Weg
zum Ziel. Das kann ein weiterer Router oder der Zielrechner sein.
<P>
Die IP-Adressen sind nicht einzeln wahllos auf Rechner in der ganzen
Welt verstreut worden. Bei IPv4 ist der Adre&szlig;raum in f&uuml;nf verschiedene
Klassen A-E unterteilt worden, wobei hier nur die Klassen A - C interessieren.
Jede IPv4-Adresse besteht aus einer Klassenkennung,
einer Netzadresse, einer m&ouml;glichen Subnetzadresse und einer Rechneradresse.
Jede Organisation im Internet bekommt eine Netzadresse
aus einer bestimmten Klasse zugewiesen. Mit den Netzadressen der verschiedenen
Klassen sind unterschiedliche Kontingente von Rechneradressen verbunden,
je nachdem wie viele Adressen von einer Organisation ben&ouml;tigt werden.
So sind die Netzadressen der Klasse B 16 Bit lang, und f&uuml;r die Adre&szlig;verteilung
innerhalb einer Organisation stehen 16 Bit zur Verf&uuml;gung. F&uuml;r
die m&ouml;gliche Aufteilung in Subnetze und die Verteilung der Adressen
an einzelne Rechner innerhalb der Organisationen sind diese selber zust&auml;ndig.
<ul>
<li>Class A-Netz: 1 Byte Netzadresse, 3 Byte Rechneradresse.
<li>Class B-Netz: 2 Byte Netzadresse, 2 Byte Rechneradresse,
<li>Class C-Netz: 3 Byte Netzadresse, 1 Byte Rechneradresse,
<li>Class D-Netz: f&uuml;r Multicast-Anwendungen
<li>Class E-Netz: f&uuml;r Experimente
</ul>
<P>
<CENTER><IMG SRC="router3.gif"></CENTER>
<P>

<H3>Beispiel f&uuml;r drei IP-Netze mit Routern</H3>
Das folgende Netz besteht aus drei IP-Netzen, die &uuml;ber Router verbunden
sind. Jeder Router hat zwei Netzwerk-Interfaces, die jeweils in zwei der
Netze h&auml;ngen. Es ist nicht unbedingt erforderlich, f&uuml;r jedes Netz
ein eigenes Interface zu verwenden; &uuml;ber sogenannte 'virtuelle Interfaces'
kann man mehrere Netze auf ein Hardwareinterface legen.
<P>
<center><IMG SRC="router4.gif" ALT=""></center>
<P>
Die Routing-Tabellen dazu sehen so aus:
<P>
<center><table border=0 cellspacing=10>
<tr><td>
<table border=1 cellpadding=5 cellspacing=1 bgcolor="#CCCCCC">
<tr><th colspan=2>Router 1</th></tr>
<tr><td>Empf&auml;nger im Netzwerk</td><td>Zustellung &uuml;ber</td></tr>
<tr><td>192.168.0.0</td><td>direkt</td></tr>
<tr><td>192.168.1.0</td><td>direkt</td></tr>
<tr><td>192.168.2.0</td><td>192.168.1.2</td></tr>
</table>
</td><td>
<table border=1 cellpadding=5 cellspacing=1 bgcolor="#CCCCCC">
<tr><th colspan=2>Router 2</th></tr>
<tr><td>Empf&auml;nger im Netzwerk</td><td>Zustellung &uuml;ber</td></tr>
<tr><td>192.168.0.0</td><td>192.168.1.1</td></tr>
<tr><td>192.168.1.0</td><td>direkt</td></tr>
<tr><td>192.168.2.0</td><td>direkt</td></tr>
</table>
</tr></table></center>
<P>

<H3>Routingverfahren</H3>
Das Routing (<I>Wegewahl</I>, <I>Pfadsteuerung</I>) hat die Aufgabe,
Pfade f&uuml;r die &Uuml;bertragung durch ein Netz festzulegen. Jeder
Vermittlungsknoten f&auml;llt dabei eine Entscheidung auf welcher
&Uuml;bertragungsleitung ein eingelaufenes Paket weitergeleitet werden
soll. Im Prinzip l&auml;uft die Entscheidung innerhalb des Routers
folgenderma&szlig;en ab:
<P>
<center><IMG SRC="router5.gif"></center>
<P>

Beim Routing werden diverse Ziele verfolgt:
<UL>
<LI>Geringe Paketverz&ouml;gerung
<LI>Hoher Durchsatz
<LI>Geringe Kosten
<LI>Fehlertoleranz
</UL>
Es gibt eine Reihe von Routingverfahren, die sich hinsichtlich Zentralisierung
und Dynamik unterscheiden:
<UL>
<LI>Zentralisierung:<BR>
Wo werden Wegewahlen getroffen?
  <UL>
  <LI>Zentral, in einem Netzkontrollzentrum.
  <LI>Dezentral, verteilt &uuml;ber die Vermittlungsknoten.
  </UL>
<LI>Dynamik:<BR>
Welche Gr&ouml;&szlig;en beeinflussen die Wegewahlen?
  <UL>
  <LI>Nicht-adaptive Verfahren. Wegewahl sind fest vorgegeben
  oder lange Zeit konstant. Der Zustand eines Netzes hat keinen
  Einflu&szlig; auf die Wegewahl.
  <LI>Adaptive Verfahren. Wegewahlen h&auml;ngen vom Zustand des
  Netzes ab (Topologie, Lastver&auml;nderungen usw.).
  </UL>
</UL>
<P>

Routing-Algorithmen benutzen zwei grundlegende Verfahrensweisen:
<ul>
<li>Teile der Welt mit, wer deine Nachbarn sind: Link-State-Routing-Protokolle
(z. B. OSPF) sorgen daf&uuml;r, da&szlig; nach einiger Zeit jeder Router die
vollst&auml;ndige Topologie des Netzwerkes kennt und sich die k&uuml;rzesten
Wege darin selbst ausrechnen kann.
<li>Teile deinen Nachbarn mit, wie für sie die Welt aussieht: Bei Distanzvektor-Protokollen
(z. B. RIP) teilen sich die Router untereinander nur mit, wie "gut" sie an
verschiedene Zielknoten angebunden sind. Durch Auswahl des f&uuml;r ein
bestimmtes Ziel optimalen Nachbarn wird die Suche nach dem k&uuml;rzesten Weg
auf mehrere Router verteilt.
<li>Eine etwas verallgemeinerte Form der Distanzvektorprotokolle mit einer
verbesserten Form der Schleifenerkennung sind die Pfadvektor-Protokolle (z. B.
das Border Gateway Protocol (BGP)).
</ul>

Weiterhin werden Routing-Algorithmen nach Ihrer Zentralisierung und Dynamik beurteilt:
<ul>
<li>Zentralisierung: Wo ist der Algorithmus lokalisiert? Zentral in einem
Netzkontrollzentrum oder dezentral verteilt auf die Vermittlungsknoten?
<li>Dynamik: Bei nicht adaptiven Verfahren bleibt die Routingtabelle im
Vermittlungsknoten, verglichen mit der Verkehrs&auml;nderung, &uuml;ber l&auml;ngere
Zeit konstant. Ist das Verfahren adaptiv, h&auml;ngen die Routingentscheidungen vom
Zustand des Netzes ab (Topologie, Lastverhältnisse).
</ul>

Aus diesen Punkten ergibt sich ein Zielkonflikt, da zentrale, nicht adaptive
Verfahren das Netz weniger mit Routingnachrichten belasten, aber m&ouml;glicherweise
veraltete und unvollst&auml;ndige Informationen &uuml;ber den Zustand des Netzes benutzen.
Je adaptiver und verteilter die Routingverfahren sind, desto besser sind die
Informationen &uuml;ber das Netz verteilt. Durch den Austausch von h&auml;ufigen Nachrichten
mit Routinginformationen wird das Netz jedoch st&auml;rker belastet. Die Routingverfahren
suchen hier einen m&ouml;glichst idealen Mittelweg.
<P>

Routingverfahren lassen sich auf dieser Basis in folgende Teile aufteilen:
<UL>
<LI>Paketweiterleitung:
  <UL>
  <LI>Verbindungslose Vermittlung (Datagramme)<BR>
  F&uuml;r jedes Datagramm wird die Wegewahl neu getroffen.
  <LI>Verbindungsorientierte Vermittlung (Session-Routing)<BR>
  Die Wegewahl wird bei der Verbindungserstellung getroffen.
  Alle Pakete einer (virtuellen) Verbindung verwenden denselben Weg.
  </UL>
<LI>Wegewahl (Routing):<BR>
  <UL>
  <LI>Routing-Protokoll (Protokoll zum Austausch von Informationen,
  die f&uuml;r die Wegewahl ben&ouml;tigt werden).
  <LI>Routing-Algorithmen (Verfahren zur Bestimmung von Wegen).
  <LI>Routing-Tabellen (Datenstrukturen, die die Wegeinformationen
  speichern).
  </UL>
</UL>
<P>

<H4>Statisches Routing</H4>
Statisches Routing (<I>Static Routing</I>, <I>Directory Routing</I>)
ist nicht adaptiv und einfach aber sehr h&auml;ufig benutzt. Die
Eigenschaften sind:
<UL>
<LI>Jeder Knoten unterh&auml;lt eine Routing-Tabelle, in der jeder
m&ouml;gliche Zielknoten durch eine Zeile gekennzeichnet ist.
<LI>Jede Zeile enth&auml;lt ein oder mehrere Eintr&auml;ge f&uuml;r die zu
verwendende &Uuml;bertragungsleitung in Richtung des Zieles. Jeder Eintrag
enth&auml;lt auch eine relative Gewichtung.
<LI>Zum Weiterleiten eines Paketes wird sein Ziel bestimmt, die
entsprechende Zeile aus der Tabelle gesucht und aus ihr die "beste"
&Uuml;bertragungsleitung ausgew&auml;hlt. Auf dieser wird das Paket
weitergesendet.
</UL>
<P>

<H4>Zentralisiertes Routing</H4>
Zentralisiertes Routing arbeitet auf einem zentralen Knoten (<I>Routing
Control Center RCC</I>). Es handelt sich um ein adaptives Verfahren:
<UL>
<LI>Jeder Knoten sendet periodisch Zustandsinformationen an das RCC
(wie den Leitungszustand, Auslastung, Verkehr usw.).
<LI>Das RCC sammelt diese Informationen und berechnet optimale
Wege durch das gesamte Netz.
<LI>Das RCC &uuml;bermittelt Routingtabellen zu jedem Knoten.
</UL>
In gro&szlig;en Netzen dauert die Berechnung sehr lange. Durch Ausfall des
RCC kann das gesamte Netz inoperabel werden.
<P>

<H4>Isoliertes Routing</H4>
Beim isolierten Routing wird die Wegewahl von jedem Knoten nur aufgrund
von Informationen, die er selber sammelt, getroffen. Eine Anpassung
an den globalen Zustand eines Netzes ist nur mit Hilfe beschr&auml;nkter
Informationen m&ouml;glich.
<P>

<H4>Verteiltes adaptives Routing</H4>
Diese Verfahren sind gekennzeichnet durch:
<UL>
<LI>Jeder Knoten tauscht periodisch Informationen f&uuml;r die
Routing-Entscheidungen mit seinen Nachbarn aus.
<LI>Routingtabellen werden anhand der Informationen von den Nachbarn bestimmt.
<LI>Routing-Informationen werden entweder in bestimmten Intervallen
synchron ausgetauscht.
<LI>Routing-Informationen werden asynchron bei lokalen &Auml;nderungen
an die Nachbarn weitergegeben.
</UL>
<P>

<H4>Hierarchisches Routing</H4>
Bei gro&szlig;en Netzen ist die Speicherung und &Uuml;bermittlung von Routing-Tabellen
kaum noch m&ouml;glich (Speicherplatz, Netzbelastung). Desweiteren verlangsamt
das Durchsuchen langer Tabellen die Weiterleitung der Pakete erheblich.
Daher verf&auml;hrt man wie folgt:
<UL>
<LI>Aufteilung des Netzes in Regionen.
<LI>Die Knoten in den Regionen haben nur Routing-Informationen
&uuml;ber die eigene Region.
<LI>Mindestens ein Knoten dient als Schnittstelle zu anderen Regionen.
<LI>Eine Hierarchisierung in Regionen, Zonen usw. ist m&ouml;glich.
</UL>
<P>

<h3>Routing im Internet</h3>
Prinzipiell unterscheidet man im Internet je nach Zweck zwei verschiedene
Arten von Routing:
<ul>
<li>Intradomain-Routing findet innerhalb eines autonomen Systems statt
(Intranet).
Es verwendet sogenannte Interior Gateway-Protokolle (IGP). Es geht in den
meisten F&auml;llen um eine technisch effizienten Nutzung des Netzwerkes.
Typisch ist eine Wegewahl entlang k&uuml;rzester Pfade. Der Administrator
versucht, durch geschicktes Konfigurieren des Routings das durch das Netzwerk
&uuml;bertragene Datenvolumen zu maximieren (Traffic Engineering).

<li>Interdomain-Routing bezeichnet das Routing zwischen autonomen Systemen.
Es verwendet sogenannte Exterior Gateway-Protokolle (EGP), meist das
Border Gateway Protocol (BGP). Da Interdomain-Routing das Routing zwischen
verschiedenen Providern regelt, liegt der Fokus beim Interdomain-Routing
normalerweise auf einer finanziell effizienten Nutzung des Netzes.
Dem zugrunde liegt die Idee, da&szlig; ein autonomes System nicht allen
seinen Nachbarn die gleichen Informationen (Routen) zukommen l&auml;sst.
Welche Informationen ausgetauscht werden, wird vertraglich geregelt
und dementsprechend die Router konfiguriert. Man spricht in diesem
Zusammenhang auch von "policy-basiertem Routing".
</ul>

(Der Namensbestandteil "domain" bezieht sich auf das autonome System, er
hat nichts mit den "DNS-Domains" zu tun.)

<h4>Zusammenwirken von Protokollen</h4>
Abh&auml;ngig davon, ob ein Router Teil eines autonomen Systems ist oder
dessen Grenze bildet, verwendet er oftmals gleichzeitig Routing-Protokolle
aus verschiedenen Klassen:
<ul>
<li>Interior Gateway Protocols (IGPs)<br>
tauschen Routing-Informationen in einem einzelnen autonomen System aus. H&auml;ufig verwendet werden:
  <ul>
  <li>IGRP/EIGRP (Interior Gateway Routing Protocol/ Enhanced IGRP)
  <li>OSPF (Open Shortest Path First)
  <li>IS-IS (Intermediate System to Intermediate System)
  <li>RIP (Routing Information Protocol)
  <li>MPLS (Multi-Protocol Label Switching)
  </ul>
<li>Exterior Gateway Protocols (EGPs)<br>
regeln das Routing zwischen verschiedenen autonomen Systemen. Dazu geh&ouml;ren:
  <ul>
  <li>BGP (Border Gateway Protocol) ist heute weltweit der de-facto-Standard (BGP4).
  <li>EGP (Exterior Gateway Protocol) verband fr&uuml;her die Internet-Backbones.
      Es ist inzwischen veraltet.
  </ul>
<li>Ad hoc Routing-Protokolle<br>
werden in Netzen mit wenig oder keiner Infrastruktur verwendet.
  <ul>
  <li>OLSR (Optimized_Link_State_Routing) findet meist Verwendung im mobilen Bereich.
  <li>AODV (Ad-hoc On-demand Distance Vector-Routing) findet in kleineren Netzen mit
      haupts&auml;chlich statischem Traffic Verwendung.
  </ul>
</ul>


<H2><A NAME="7.8">Layer-3-Switching</A></H2>
Layer-3-Switching ist eine neue Technologie. Sie kombiniert leistungsf&auml;higes
Switching (Layer 2) mit skalierbarem Routing (Layer 3). Herk&ouml;mmliche Switches
verwenden die MAC-Adresse der Ethernet-Frames zur Entscheidung, wohin die Frames
transportiert werden sollen, w&auml;hrend Router Datenpakete anhand von Routingtabellen
und Accesslisten auf Layer-3-weitervermitteln. Router sind in vielen Installationen als
reine LAN-to-LAN-Router im Einsatz, um Subnetze zu verbinden und die
Nebeneffekte von rein geswitchten Netzen, wie z. B. Broadcast-St&uuml;rme, fehlendes
Subnetting etc. zu verhindern. Router, die auf der Transportebene arbeiten,
m&uuml;ssen jedes IP-Paket aus den Ethernet-Frames zusammenbauen und vielf&auml;ltige
Operationen an IP-Paketen durchf&uuml;hren. Dies f&uuml;hrt zu einer
Verz&ouml;gerungszeit und, im Vergleich zu Switches, geringerem Datendurchsatz.
In reinen IP-Netzen kann das Layer-3-Switching, auch "Fast IP" genannt, diese
LAN-to-LAN-Router ersetzen. Der Layer-3-Switch liest beim ersten IP-Paket
s&auml;mtliche Frames dieses Paketes, analysiert die Absender- und
Empf&auml;nger-IP-Adressen und leitet das IP-Paket weiter. Alle nachfolgenden Frames
dieses Stationspaars k&ouml;nnen daraufhin anhand der MAC-Adresse
weitergeleitet werden. Der Layer-3-Switch behandelt IP-Pakete beim ersten Mal wie ein
Router, nachfolgende Daten k&ouml;nnen auf Frame-Ebene geswitcht werden. Nicht-IP-Daten,
wie z. B. IPX-Pakete, werden vom Layer-3-Switch auf Layer 2 geswitcht.
Das Konzept des Layer-3-Switching bedingt eine Erweiterung des
Ethernet-Frameformats und ist bisher nur propriet&auml;r implementiert. Die
Erweiterung des Layer-3-Switching auf andere Layer-3-Protokolle wie z.B. IPX ist
geplant. Es ist anzunehmen, da&szlig; die herstellerspezifischen Implementationen in einen
gemeinsamen Standard m&uuml;nden.
<P>

<H2><A NAME="7.9">Terminalserver</A></H2>
Ein Terminal-Server dient dazu, einem beliebigen Endger&auml;t, sofern es
eine serielle, asynchrone V.24 (RS 232 C)-Schnittstelle besitzt, die Verbindung
zu einem Rechner herzustellen. Der Terminal-Server ist &uuml;ber einen Transceiver
an das Ethernet angeschlossen und stellt dem Terminal-Benutzer eine Kommandoschnittstelle
zur Verf&uuml;gung, so da&szlig; er Verbindungen aufbauen, abbauen und Parameter
(z.B. Echo) setzen kann. Ein Terminal kann meist mehrere Verbindungen haben
und zwischen ihnen wechseln. Es gibt Terminal-Server f&uuml;r verschiedene
Protokolle, z. B. f&uuml;r TCP/IP (Telnet) und DECnet (LAT) oder auch beides
zugleich. Die meisten Terminal-Server haben acht Ports zum Anschlu&szlig;
von Endger&auml;ten, sie k&ouml;nnen auch kaskadiert werden. Der Einsatz
eines Terminal-Servers ist immer n&ouml;tig, wenn es f&uuml;r das Endger&auml;t
keine M&ouml;glichkeit gibt, eine Ethernet-Karte einzubauen.
<P>

<H2><A NAME="7.10">Gateway</A></H2>
Gateways k&ouml;nnen v&ouml;llig unterschiedliche (heterogene) Netze miteinander
koppeln. Sie stellen einen gemeinsamen (virtuellen) Knoten dar, der zu beiden
Netzen geh&ouml;rt und den netz&uuml;bergreifenden Datenverkehr abwickelt.
Gateways werden einerseits f&uuml;r die LAN-WAN-Kopplung (oder die LAN-WAN-LAN-Kopplung)
andererseits f&uuml;r den &Uuml;bergang zwischen unterschiedlichen Diensten
verwendet (z. B. das Absetzen von Fax-Nachrichten aus einem LAN).
<P>
Ein Gateway ist ein aktiver Netzknoten, der von beiden Seiten aus adressiert
werden kann. Er kann auch mehr als zwei Netze miteinander koppeln.
Gateways behandeln auf beiden Seiten unterschiedliche Protokolle bis hinauf
zur Schicht 7. Insbesondere ist das Routing &uuml;ber Netzgrenzen (korrekte
Adressierung!) hinweg eine wichtige Aufgabe des Gateways. Man unterscheidet
im wesentlichen zwei Typen:<BR>
<UL>
<LI>Medienkonvertierende Gateways (Translatoren), die bei gleichem &Uuml;bertragungsverfahren
die Verbindung zwischen unterschiedlichen Protokollen der unteren beiden
Ebenen (bei unterschiedlichem Transportmedium) herstellen - also dort, wo
ein Router nicht mehr ausreichen w&uuml;rde.
<LI>Protokollkonvertierende Gateways, die unterschiedliche Protokolle der
Ebenen 3 und 4 abwickeln und ineinander &uuml;berf&uuml;hren.
</UL>
<P>
Der Gateway unterst&uuml;tzt haupts&auml;chlich zwei wichtige Dienste: Die
&Uuml;bermittlung aufeinanderfolgender Nachrichten zwischen Quelle und Ziel
als unabh&auml;ngige Einheit und das Etablieren einer logischen Verbindung
zwischen Quelle und Ziel. Um auf die unterschiedlichen Anforderungen der
Flu&szlig;kontrolle der zu verbindenen Netze eingehen zu k&ouml;nnen, mu&szlig;
der Gateway gegebenfalls Daten zwischenspeichern. Ist eines der beteiligten
Netze leistungsf&auml;higer als das andere, mu&szlig; der Gateway dies erkennen
und das "schnellere" Netz bremsen. Arbeiten beide Netze mit unterschiedlichen
Paketgr&ouml;&szlig;en, m&uuml;ssen Datenpakete "umgepackt" werden.
Dies kann ganz einfach dadurch geschehen, da&szlig; zu gro&szlig;e Pakete
in kleinere Pakete aufgespalten und am Ziel gegebenenfalls wieder zusammengesetzt
werden.
<P>

<H2><A NAME="7.11">Firewall-Rechner</A></H2>
Als Schutz vor Einbruchsversuchen in lokale Netze, die &uuml;ber einen Anschlu&szlig;
an &ouml;ffentliche Netze verf&uuml;gen (z. B. Internet, aber auch ISDN),
haben sich Firewall-Rechner, kurz 'Firewalls' bew&auml;hrt. &Auml;hnlich
der Zugbr&uuml;cke einer Burg erlauben sie den Zugang nur an einer definierten
Stelle. Damit l&auml;&szlig;t sich der Datenverkehr von und nach au&szlig;en
kontrollieren. Normalerweise sind zahlreiche Rechner des Unternehmens, die
unter diversen Betriebssystemen laufen, direkt aus dem &ouml;ffentlichen
Netz erreichbar. Eine Firewall kanalisiert die Kommunikation, indem alle
Daten von und nach au&szlig;en &uuml;ber dieses System laufen m&uuml;ssen.
Die Kanalisierung erh&ouml;ht zudem die Chancen, einen Einbruchversuch anhand
ausf&uuml;hrlicher Protokoll-Dateien zu erkennen, da der Eindringling erst
die Firewall passieren mu&szlig;.<BR>
Eine Firewall kann aus einer einzelnen Maschine oder aus einer mehrstufigen
Anordnung bestehen. Eine mehrstufige Anordnung ist vor allem dann sinnvoll,
wenn man bestimmte Dienste der &Ouml;ffentlichkeit zur Verf&uuml;gung stellen
will, etwa einen WWW- oder FTP-Server. Die entsprechenden Hosts k&ouml;nnen
dann in einem Zwischennetz isoliert werden.
<P>
<H4>Architektur mit Dualhomed-Host</H4>
Eine Architektur mit Dualhomed-Host wird um einen Rechner herum aufgebaut, der
&uuml;ber mindestens zwei Netzwerkschnittstellen verf&uuml;gt. Ein solcher Host
ist als Router zwischen den Netzen einsetzbar, die an die Schnittstellen
angeschlossen sind. Er kann dann IP-Pakete von Netz zu Netz routen. F&uuml;r
diese Firewall-Architektur mu&szlig; diese Routingfunktion jedoch deaktiviert
werden.
<P>
<CENTER><IMG SRC="fw1.gif"></CENTER>
<P>
IP-Pakete werden somit nicht direkt von dem einen Netz (dem Internet) in das andere
Netz (das interne, gesch&uuml;tzte Netz) geroutet. Systeme innerhalb der Firewall und
Systeme au&szlig;erhalb (im Internet) k&ouml;nnen jeweils mit dem Dualhomed-Host,
aber nicht direkt miteinander kommunizieren. Der IP-Verkehr zwischen ihnen wird
vollst&auml;ndig blockiert. Die Netzarchitektur f&uuml;r eine Firewall mit
Dualhomed-Host ist denkbar einfach: der Dualhomed-Host sitzt in der Mitte, wobei
er mit dem Internet und dem internen Netz verbunden ist. Ein Dualhomed-Host kann
Dienste nur anbieten, indem er entsprechende Proxies (Stellvertreter) oder
Gateways einsetzt. Es ist jedoch auch m&ouml;glich, direkte Nutzerzugriffe zu
gestatten (Sicherheitsrisiko).
<P>

<H4>Architektur mit &uuml;berwachtem Host</H4>
Die "screened host architecture" bietet Dienste von einem Rechner an, der nur
an das interne Netz direkt angeschlossen ist, wobei ein getrennter Router
verwendet wird. Der Bastion-Host befindet sich im inneren Netz. Auf diesem
Router verhindern Paketfilter das Umgehen des Bastion-Host. Die Paketfilterung
auf dem Sicherheitsrouter mu&szlig; so konfiguriert werden, da&szlig; der
Bastion-Host das einzige System im internen Netz darstellt, zu dem Rechner aus
dem Internet Verbindungen aufbauen k&ouml;nnen (das einzige "nach au&szlig;en
sichtbare" System). Zus&auml;tzlich sind nur gewisse Dienste zugelassen.
<P>
<CENTER><IMG SRC="fw2.gif"></CENTER>
<P>
Alle externen Systeme, die auf interne Systeme zugreifen wollen, und auch alle
internen Systeme, die externe Dienste wahrnehmen wollen, m&uuml;ssen sich mit
diesem Rechner verbinden. Daraus ergibt sich ein besonderes Schutzbed&uuml;rfnis
f&uuml;r diesen Bastion-Host. Der Vorteil bei dieser Konstruktion ist die Tatsache,
da&szlig; ein Router leichter zu verteidigen ist. Dies liegt u. a. daran, da&szlig;
auf ihm keine Dienste angeboten werden. Nachteilig wirkt sich aus, da&szlig; bei
einer eventuellen Erst&uuml;rmung des Bastion-Host das interne Netz vollkommen
schutzlos ist.
<P>

<H4>Architektur mit &uuml;berwachtem Teilnetz</H4>
Die "screened subnet architecture" erweitert die Architektur mit &uuml;berwachtem
Host um eine Art Pufferzone, die als Grenznetz das interne Netz vom Internet
isoliert. Diese Isolierzone wird auch "Demilitarisierte Zone" (DMZ) genannt.
<P>
<CENTER><IMG SRC="fw3.gif"></CENTER>
<P>
Bastion-Hosts sind von ihrer Art her die gef&auml;hrdetsten Rechner in einer
Firewallkonstruktion. Auch wenn sie in der Regel mit allen Mitteln gesch&uuml;tzt
sind, werden sie doch am h&auml;ufigsten angegriffen. Die Ursache liegt darin,
da&szlig; ein Bastion-Host als einziges System Kontakt zur Au&szlig;enwelt
unterh&auml;lt.
<P>
Zur Software-Konfiguration einer Firewall existieren zwei Grundstrategien:
<P><UL>
<LI>'Es ist alles erlaubt, was nicht verboten ist'<BR>
Dieser Ansatz schlie&szlig;t die Nutzung bestimmter Dienste (z. B. tftp,
nfs) generell aus. Er ist benutzerfreundlich, da neue Dienste automatisch
erlaubt sind, aber auch gef&auml;hrlich, da der Administrator das Verhalten
der Nutzer st&auml;ndig beobachten und rechtzeitig Gegenma&szlig;nahmen
treffen mu&szlig;.<BR>
<P>
<LI>'Es ist alles verboten, was nicht erlaubt ist'<BR>
Diese Strategie k&ouml;nnte von den Nutzern als hinderlich angesehen werden,
da diese neue Dienste erst umst&auml;ndlich beantragen m&uuml;ssen. Sie
sch&uuml;tzt aber auch vor Sicherheitsl&uuml;cken im Betriebssystem und
in Anwendungsprogrammen, da sie den Zugriff auf unbekannte Ports unterbindet.
</UL>
<P>
Es gibt drei Arten von Firewall-Softwaresystemen:<BR>
<P><UL>
<LI>Paketfilter &uuml;berpr&uuml;fen die Quell- und Zieladresse (IP-Adresse
und TCP/UDP-Port) eines Pakets und entscheiden, ob es passieren darf oder
nicht. Der Vorteil besteht in der Transparenz f&uuml;r den Anwender. Diese
Transparenz ist aber zugleich von Nachteil: Paketfilter k&ouml;nnen nicht
zwischen Nutzern und deren Rechten unterscheiden. Paketfilter sind im allgemeinen
auf Routern angesiedelt und werden heute von den meisten Herstellern mitgeliefert.
Intelligente Paketfilter analysieren zus&auml;tzlich den Inhalt der Pakete
und erkennen auch die Zul&auml;ssigkeit von Verbindungen, die einfache Paketfilter
nicht erlauben w&uuml;rden (z. B. Datenverbindung bei ftp).
<P>
<LI>Circuit Level Gateways sind mit Paketfiltern vergleichbar, arbeiten jedoch
auf einer anderen Ebene des Protokollstacks. Verbindungen durch solch ein
Gateway erscheinen einer entfernten Maschine, als best&uuml;nden sie mit
dem Firewall-Host. Somit lassen sich Infomationen &uuml;ber gesch&uuml;tzte
Netzwerke verbergen.
<P>
<LI>Application Gateways, auch 'Proxy' (Stellvertreter) genannt, stellen ein
anderes Firewall-Konzept dar. Hierbei wird auf dem Firewall-Host f&uuml;r
jede zul&auml;ssige Anwendung ein eigenes Gateway-Programm installiert.
Der Client mu&szlig; sich dabei oftmals gegen&uuml;ber dem Proxy-Programm
authentifizieren. Dieser Proxy f&uuml;hrt dann alle Aktionen im LAN stellvertretend
f&uuml;r den Client aus. Damit lassen sich zum einen benutzerspezifische
Zugangsprofile (welche Zeiten, welche Dienste, welche Rechner) erstellen,
zum anderen kann man die Festlegung der zul&auml;ssigen Verbindungen anwendungsbezogen
vornehmen. Die daraus resultierenden separaten kleinen Regels&auml;tze bleiben
besser &uuml;berschaubar als der komplexe Regelsatz eines Paketfilters.
Application Gateways sind typische Vertreter der 'Verboten-was-nicht-erlaubt'-Strategie
und als die sicherste, aber auch aufwendigste L&ouml;sung einzusch&auml;tzen.
<BR>
Da beim Proxy alle Zugriffe nach au&szlig;en &uuml;ber eine Instanz laufen,
kann man den Proxy gleichzeitig als Cache (Pufferspeicher) benutzen. Der
Proxy speichert alle erhaltenen WWW-Seiten zwischen, so da&szlig; er bei
einem erneuten Zugriff darauf - egal, ob vom selben oder einem anderen Anwender
- keine Verbindung nach au&szlig;en aufbauen mu&szlig;.<BR>
</UL>
<P>
Der Einsatz von Firewalls bietet sich auch innerhalb einer Organisation
an, um Bereiche unterschiedlicher Sensitivit&auml;t von einander abzugrenzen.
Firewalls bieten jedoch niemals hundertprozentige Sicherheit! Sie sch&uuml;tzen
nicht vor dem Fehlverhalten eines authorisierten Anwenders und k&ouml;nnen,
etwa durch eine zus&auml;tzliche Modem-Verbindung, umgangen werden.
</UL>
<P>
Mehr zu diesem Thema finden Sie im
<A HREF="http://www.netzmafia.de/skripten/sicherheit/sicher4.html">
Firewall-Kapitel des Sicherheits-Skripts</A>.
<P>


<H2><A NAME="7.12">VLAN - virtuelle lokale Netzwerke</A></H2>

<H4>Was ist ein VLAN?</H4>
Die Abk&uuml;rzung VLAN steht f&uuml;r "virtuelles LAN", also eine Netzstruktur mit
allen Eigenschaften eines gew&ouml;hnlichen LAN, jedoch ohne r&auml;umliche Bindung.
W&auml;hrend die Stationen eines LAN nicht beliebig weit
auseinander liegen k&ouml;nnen, erm&ouml;glicht es ein VLAN hingegen, weiter entfernte
Knoten zu einem virtuellen lokalen Netzwerk zu verbinden.
<P>
VLANs sind geswitchte Netze, die logisch segmentiert werden k&ouml;nnen. Ohne
Beschr&auml;nkung durch die r&auml;umliche Position ist m&ouml;glich, Server und Workstations
nach ihrer Funktion zu dynamischen Arbeitsgruppen zusammenzufassen. VLANs k&ouml;nnen
transparent und ohne physikalische Ver&auml;nderungen des Netzes eingerichtet werden.
Eine Umgliederung ist ohne Umpatchen oder Verlegen von Rechnern m&ouml;glich, im
Idealfall kann sie &uuml;ber Software erfolgen.
<P>
Ein VLAN ist weiters eine Broadcast- und Kollisionsdom&auml;ne, die sich auch &uuml;ber
mehrere Switches erstrecken kann. Der Broadcastverkehr ist nur in dem VLAN
sichtbar. Diese M&ouml;glichkeit, VLANs komplett voneinander zu isolieren, erh&ouml;ht die
Sicherheit. Der Verkehr zwischen VLANs mu&szlig; geroutet werden,  hier gibt es
L&ouml;sungen, die die Geschwindigkeit von Switches erreichen. Innerhalb des VLAN ist
hingegen kein Routing n&ouml;tig.
<P>
Beliebige Netzteilnehmer aus verschiedenen Segmenten k&ouml;nnen nach
unterschiedlichen Kriterien (Switch-Port, MAC-Adresse, Protokoll der Netzwerkschicht,
logische Netzwerkadresse, Applikation) zu einem virtuellen Netz vereint
werden, ohne da&szlig; das Netz physikalisch umstrukturiert werden mu&szlig;.
<P>

<H4>Warum virtuelle Netze?</H4>
<UL>
<LI>Broadcasts werden nicht &uuml;ber das gesamte Netzsegment verbreitet
<LI>Einfache Abbildung der Organisationsstruktur auf die Netzwerkstruktur
<LI>Unterst&uuml;tzung dynamischer Workgroups
<LI>R&auml;umliche Entfernung der Mitarbeiter spielt keine Rolle bei der
Aufgabenverteilung
<LI>Jeder Mitarbeiter zieht etwa alle paar Jahre innerhalb des Unternehmens
um, verbleibt aber in seiner logischen Arbeitsgruppe
<LI>Server in zentralen Technikr&auml;umen werden entfernten Arbeitsgruppen
zugeordnet
<LI>Teilweise kein Routing mehr n&ouml;tig
</UL>
Bisher wurden Netze mit Hilfe von Routern segmentiert. Router sind teuer,
es entstehen viele Subnetze, die Router beanspruchen viel Rechenzeit und der
IP-Adressraum wird schnell zu klein. VLANs vereinigen die Vorteile von Bridges
und Routern: Eine Station kann leicht hinzugef&uuml;gt, entfernt oder ge&auml;ndert werden
und das Netz kann strukturiert werden. Es k&ouml;nnen beispielsweise virtuelle
Benutzergruppen gebildet werden und es ist nicht mehr erforderlich, Benutzer
nur deshalb verschiedenen Subnetzen zuzuordnen, weil ihre r&auml;umliche Entfernung
zu gro&szlig; ist. Server, die in zentralen R&auml;umen untergebracht sind, k&ouml;nnen
r&auml;umlich entfernten Workgroups zugeordnet werden. <BR>
VLANs k&ouml;nnen helfen, Geld zu sparen, denn Switches sind billiger als Router
und leichter zu administrieren. Gerade das Ändern von Subnetzadressen, das mit
VLANs vermieden wird, ist in gro&szlig;en Netzen sehr aufw&auml;ndig und damit teuer.
Der Broadcast-Traffic wird nicht auf alle Ports &uuml;bertragen, sondern bleibt im
entsprechenden VLAN. Broadcasts in fremden VLANs sind nicht sichtbar.
<P>

<H4>Realisierung von VLANs</H4>
VLANs werden mittels Switches gebildet. Diese unterst&uuml;tzen an jedem Port
die volle Bandbreite und transportieren die Daten schneller als Router.
Netzteilnehmer k&ouml;nnen nach verschiedenen Kriterien zu virtuellen Netzen
vereinigt werden, und eine Management-Software erm&ouml;glicht ggf. eine
komfortable Verwaltung und Konfiguration der VLANs.<BR>
Zur Inter-VLAN-Kommunikation mu&szlig; Routing eingesetzt werden. Entweder ist
ein Router &uuml;ber mehrere physische Ports als Teil mehrerer VLANs eingerichtet,
oder es wird VLAN-Trunking eingesetzt. In diesem Fall mu&szlig; der Router VLAN-Tags
erkennen und ver&auml;ndern k&ouml;nnen.
<P>
<I>Abbilden von Ports auf VLANs</I><BR>
Ausgangsbasis sind ein Switch oder mehrere miteinander verbundene Switches, bei denen
die Ports unterschiedlichen VLANs zugeordnet werden. Die einfachste Form w&auml;re
ein Switch, bei dem die H&auml;lfte der Ports dem VLAN A und die andere H&auml;lfte
dem VLAN B zugeordnet ist. Um den Geltungsbereich eines VLANs festzulegen, gibt
es mehrere Strategien:
<OL>
<LI>VLAN A belegt die Ports 1 bis k, VLAN B die Ports k+1 bis n.
<LI>Der Switch kann mit einer VLAN/Port-Zuordnung konfiguriert werden.
<LI>Der Switch kann mit einer VLAN/MAC-Adressen-Zuordnung konfiguriert
werden. Er bestimmt dann dynamisch die VLAN/Port-Zuordnung aufgrund der MAC-Adresse.
<LI>Der Switch kann mit einer VLAN/IP-Pr&auml;fix-Zuordnung konfiguriert werden.
Er bestimmt dann dynamisch die VLAN/Port-Zuordnung aufgrund der Quell-IP-Adresse.
<LI>Der Switch kann mit einer VLAN/Protokoll-Zuordnung konfiguriert werden.
Er bestimmt dann dynamisch die VLAN/Port-Zuordnung aufgrund des Protokolltyps.
</OL>
Bei den ersten beiden Punkten spricht man von "Port-basierenden VLANs", bei Punkt
drei von "Level-2-VLANs" und den letzten Punkten von "Protokoll-basierenden VLANs".
<P>

<I>Port-basierende VLANs</I><BR>
Die Ports eines Switches werden unterschiedlichen VLANs zugeordnet. An einem
Port k&ouml;nnen immer nur Angeh&ouml;rige desselben VLANs angeschlossen sein.
Die starre Zuordnung zwischen Port und VLAN vereinfacht die Fehlersuche. Soll
eine Station zu mehreren VLANs geh&ouml;ren, so sind aber mehrere Netzwerk-Adapter
n&ouml;tig. Bei Broadcasts ist eine hohe Sicherheit gew&auml;hrleistet.
Die Flexibilit&auml;t bei Umz&uuml;gen ist nicht gro&szlig;, denn ein Umzug einer Station
mu&szlig; durch den Administrator im VLAN-Manager nachgef&uuml;hrt werden. Im Gegensatz zu
der Gruppierung nach MAC-Adressen oder IP-Adressen kann das Enger&auml;t nicht
einfach den Umzug bekannt geben und das VLAN automatisch umgestaltet werden.
Dieses Verfahren ist weit verbreitet, es ist durch IEEE 802.1Q standardisiert
und wird von vielen Herstellern unterst&uuml;tzt.
<P>

<I>Level-2-VLANs</I><BR>
Die Zugeh&ouml;rigkeit zu einem VLAN richtet sich nach der MAC-Adresse.
Der Switch mu&szlig; bei jedem empfangenen Datenpaket entscheiden, zu
welchem VLAN es geh&ouml;rt. So k&ouml;nnen an einem Port auch Stationen verschiedener
VLANs angeschlossen sein, aber es kann in diesem Fall auch zu Performance-Verlusten
kommen.
Der Umzug von Stationen ist leicht m&ouml;glich, da die Zuordnung zum VLAN ja
erhalten bleibt. Problematisch ist die Initialisierung, da die MAC-Adressen
aller Endger&auml;te erfasst werden m&uuml;ssen. Gerade in gro&szlig;en Netzen, wo
h&auml;ufig VLANs eingerichtet werden m&uuml;ssen, ist dann aber die VLAN-Konfiguration
der einzelnen Arbeitspl&auml;tze wieder sehr zeitaufwendig.
<P>
<IMG SRC="vlan1.gif">
<P>
Schema eines Netzwerkes aus zwei Layer-2 Switches und einem Router.
<P>
Der Layer-2-Switch interpretiert wie eine Bridge nur die MAC-Adresse
der Pakete. Es kann aber im Unterschied zu dieser parallel arbeiten und
mehrere Pakete gleichzeitig weiterleiten, etwa von Port A nach C und von
B nach D.
<P>
Sobald jedoch mehrere Switches vernetzt sind, mu&szlig; sichergestellt
werden, da&szlig; die Adre&szlig;tabellen in allen Switches konsistent
sind. Dazu m&uuml;ssen regelm&auml;&szlig;ig Informationen &uuml;ber das
Netz &uuml;bertragen werden. Genau dies ist aber das Hauptproblem der VLANs.
Jeder Hersteller verwendet f&uuml;r diesen Informationsabgleich eigene
Verfahren. Deshalb verstehen sich die Switches verschiedener Produzenten
oft nicht. U. a. gibt es:
<UL>
<LI>den regelm&auml;&szlig;igen Austausch der Adre&szlig;tabellen mit
MAC-Adressen und VLAN-Nummer. Die Tabellen werden etwa einmal pro Minute
ausgetauscht.
<LI>das Frame Tagging, bei dem die VLAN-Nummer als Tag vor das MAC-Paket
gesetzt. Die zul&auml;ssige Paketl&auml;nge kann dabei &uuml;berschritten werden.
<LI>das Zeitmultiplexverfahren, bei dem der Backbone zwischen den Switches in
Zeit-Slots aufgeteilt wird, die fest den einzelnen VLANs zugeordnet sind.
</UL>
<P>

<I>Protokoll-basierende VLANs</I><BR>
Layer-3-Switches bieten zus&auml;tzliche M&ouml;glichkeiten durch
Basis-Routing-Funktionalit&auml;t wie z.B. ARP. Der externe Router wird
somit oft &uuml;berfl&uuml;ssig. Diese Variante ist langsamer, da auch
Layer-3-Informationen ausgewertet werden m&uuml;ssen. Die Zuordnung einzelner
Datenpakete zu verschiedenen virtuellen LANs geschieht durch Auswertung
der Subnetzadressen oder portbasiert. Innerhalb eines VLAN wird auf Layer
2 geswitcht. Bei der Verwendung nicht routingf&auml;higer Protokolle treten
Schwierigkeiten auf und dynamische Adresszuordnungsverfahren k&ouml;nnen nicht
eingesetzt werden.
<P>
<IMG SRC="vlan2.gif">
<P>
Layer-3-Switches verwenden Routerfunktionen zur Definition virtueller Netze.
Um effizient arbeiten zu k&ouml;nnen, wird innerhalb eines VLAN nur gebridged.
<P>

<I>Regelbasierende VLANs</I><BR>
Hier werden logische Zuordnungen eingesetzt und die VLAN-Zugeh&ouml;rigkeit
wird anhand des Ports, der MAC-Adresse, des Protokolls oder der Netzadresse
bestimmt.
Das System ist besonders flexibel, der Administrator kann selbst eine Balance
zwischen Sicherheit, Verkehrsoptimierung und Kontrolle erreichen, aber daf&uuml;r ist
die Einrichtung aufwendig. Durch die Abarbeitung der einzelnen Regeln ergibt
sich eine hohe Latenzzeit.
<P>

<H4>Layer-2-Switches</H4>
Layer-2-Switches arbeiten unabh&auml;ngig von dar&uuml;ber liegenden
Protokollen auf der Data-Link-Layer und garantieren eine transparente Verbindung
der Endger&auml;te.
W&auml;hrend des Betriebs lernt ein Switch alle MAC-Adressen und ordnet
sie in einer MAC-Tabelle den Anschlussports zu. In dieser Tabelle sucht
der Switch nach der Zieladresse und dem zugeordneten Zielport.
Die Adresstabellen der Switches m&uuml;ssen um die Adressen der
VLANs erg&auml;nzt und immer am aktuellen Stand gehalten werden. Daf&uuml;r
stehen haupts&auml;chlich folgende Verfahren zur Verf&uuml;gung:
<P>

<UL>
<LI>Austausch der MAC-Adresstabellen<BR>
Wie beim Routing tauschen auch die Switches Informationen aus um
ihre Adresstabellen abzugleichen. Wird eine neue Station an das Netz angeschlossen,
so erkennt der lokale Switch am Port, zu welchem VLAN die Station geh&ouml;rt
und erg&auml;nzt seine Adresstabelle. Dann sendet er die MAC-Adresse und
die Adresse des VLANs an die anderen Switches. Wenn alle Switches die neue
Endstation kennen, k&ouml;nnen deren Daten &uuml;bertragen werden.

<LI>Time Division Multiplexing (TDM)<BR>
Beim Zeitmultiplexverfahren wird der Backbone, der die Switches
verbindet, in Zeitslots aufgeteilt und jedes VLAN erh&auml;lt exklusiv
einen oder mehrere Slots zur Daten&uuml;bertragung. Die Switches m&uuml;ssen
nur wissen, welcher Zeitslot welchem VLAN zugeordnet ist. Es entf&auml;llt
zwar der Overhead durch den Austausch von Adresstabellen oder aufgrund
von Tags, aber Bandbreite, die von einem VLAN nicht genutzt wird, steht
nicht f&uuml;r andere VLANs zur Verf&uuml;gung. F&uuml;r den sinnvollen
Einsatz dieses Verfahrens ist eine an das tats&auml;chliche Netzverhalten
angepasste Zuordnung der Zeitslots n&ouml;tig.

<LI>Frame Tagging<BR>
Das Frame Tagging wird am h&auml;ufigsten eingesetzt. Beim <B>impliziten Tagging</B>
werden keine zus&auml;tzlichen Informationen in das Datenpaket
eingef&uuml;gt, sondern die Tagging-Information wird aus der vorhandenen
Header-Information hergeleitet und vom Switch in Tabellen gespeichert.
Dadurch werden vorhandene Standards nicht verletzt.
<P>
Beim <B>expliziten Tagging</B> wird in den Ethernet-Frame ein Marker (Tag)
eingesetzt (VLAN-ID), der angibt, zu welchem VLAN das Datenpaket geh&ouml;rt.
Dadurch ist kein Austausch von Adresstabellen n&ouml;tig.
Der erste Switch, der ein bestimmtes Datenpaket erh&auml;lt, analysiert
es auf seine VLAN-Zugeh&ouml;rigkeit und f&uuml;gt die Kennung des VLANs
als Tag an. Das Paket wird am Backbone von Switch zu Switch weitergeleitet,
der letzte Switch entfernt das Tag und &uuml;bergibt das Paket der Endstation.
Die Switches m&uuml;ssen sehr leistungsf&auml;hig sein, um m&ouml;glichst
mit Wirespeed die Paketinformationen auswerten und mit den Tabellen vergleichen
zu k&ouml;nnen.
<p>Das Einf&uuml;gen von zus&auml;tzlicher Information in das Paket ist
problematisch, wenn die Datenpakete schon die maximal zul&auml;ssige L&auml;nge
erreicht haben. Durch das Hinzuf&uuml;gen eines weiteren Tags w&uuml;rden
dann die Vorgaben des MAC-Protokolls verletzt, das Paket als fehlerhaft
erkannt und vernichtet. Daher setzen die Hersteller spezifische Techniken
zur Vermeidung dieses Problems ein (Kapselung - Encapsulation) - siehe unten.
<P>
Layer-2-Systeme sind leichter zu konfigurieren als Ebene-3-VLANs,
ben&ouml;tigen weniger Software und sind meist preisg&uuml;nstiger und
schneller. Au&szlig;erdem sind sie protokollunabh&auml;ngig und k&ouml;nnen
auch nicht routbare Protokolle bedienen.
<P>

<H4>Layer-3-Switches</H4>
Layer-3-Switches arbeiten auf der Netzwerkebene (Layer 3 des ISO/OSI-Modells).
Sie integrieren Routing-Funktionalit&auml;t in die VLANs und machen externe
Router zur Verbindung der VLANs &uuml;berfl&uuml;ssig. Daher werden sie
auch als "Switched Router" bezeichnet.
Layer-3-Switches k&ouml;nnen Ebene-3-Informationen auswerten und deshalb
VLANs auch abh&auml;ngig vom verwendeten Protokolltyp definieren. So kann
man z.B. alle IP-Stationen oder alle Netware-Stationen ortsunabh&auml;ngig
zu einem VLAN zusammenfassen. In Schicht-3-VLANs werden eigentlich
nicht Endger&auml;te, sondern Datenpakete den VLANs zugeordnet. Diese Zuordnung
geschieht durch Auswerten der Subnetzadressen und es ist kein Informationsaustausch
zwischen den Switches wie bei den Layer-2-Systemen n&ouml;tig.<BR>
Obwohl auch die Ebene-3-Informationen ausgewertet werden, mu&szlig; die
Routing-Funktionalit&auml;t nur zwischen den VLANs eingesetzt werden.
Layer-3-Switches m&uuml;ssen auch Routing-Protokolle beherrschen.
Unbekannte Datenpakete werden innerhalb des VLANs an alle Stationen
geschickt (Broadcast). Der Broadcast-Traffic kann aber durch Bildung von
Subnetzen einged&auml;mmt werden.<BR>
Im Vergleich zu klassischen Routern erlauben Layer-3-Switches einen
sehr schnellen Durchsatz auf Ebene 3, da die Zuweisung der Daten &uuml;ber
spezielle Hardware erfolgt. "Wirespeed Switched Router" sind in der Lage,
Pakete ohne Verz&ouml;gerung, also mit Leitungsgeschwindigkeit, weiterzuleiten.
F&uuml;r den Umzug von Mitarbeitern ist keine manuelle Rekonfiguration
des Netzwerks n&ouml;tig, sondern der Switch lernt automatisch die neuen
Verbindungen und baut daraus Routing- bzw. Switching-Tabellen auf.
<P>
Layer-3-Systeme sind f&uuml;r komplexe Netzwerke besser geeignet, der
Overhead zur Synchronisation f&auml;llt weg. Broadcast kann gezielter
&uuml;bertragen werden und es stehen Filterm&ouml;glichkeiten zur Sicherung
der VLANs zur Verf&uuml;gung.
<P>

<H4>Dynamische VLAN-Bindung, Switch-Switch</H4>
Sehen wir uns nun den Fall an, wenn ein Switch an einen anderen Switch
angeschlossen ist:
<P>
<CENTER><IMG SRC="vlan5.gif"></CENTER>
<P>
Auf der Verbindung zwischen den beiden Switches k&ouml;nnen Pakete entweder
zu VLAN 1 oder VLAN 2 geh&ouml;ren. Das Schema zum Hinzuf&uuml;gen
von zusatzlichen Informationen zu einem Paket ist vom IEEE standardisiert.
Es handelt sich um die "VLAN-Marke", damit Switches wissen, f&uuml;r welches
VLAN ein Paket bestimmt ist. Ein Endger&auml;t w&auml;re jedoch verwirrt, wenn
es ein Paket mit einer VLAN-Marke erhalten w&uuml;rde. Folglich m&uuml;ssen die
Switches wissen, an welche Ports Switches und an welche Ports Endger&auml;te
angeschlossen sind. Ein Switch entfernt die VLAN-Marke vom Paket, bevor
er es zu einem Nicht-Nachbarswitch-Port weiterleitet.<BR>
Die VLAN-Marke ist eine 2-Byte-Zahl, die drei Bits f&uuml;r die Priori&auml;t,
zw&ouml;lf Bits f&uuml;r eine VLAN-ID und ein Bit enth&auml;lt, das anzeigt, ob
die Adressen im kanonischen Format vorliegen. Durch den Ethernet-Typ <B>81-00</B>
wird angezeigt, da&szlig; eine VLAN-Marke vorhanden ist.
Beispielsweise ist ein Ethernet-Paket folgenderma&szlig;en aufgebaut:
<P>
<CENTER><IMG SRC="vlan6.gif"></CENTER>
<P>
<CENTER><IMG SRC="vlan3.gif"></CENTER>
<P>
</UL>
Dasselbe Paket mit VLAN-Marke sieht dann folgenderma&szlig;en aus:
<P>
<CENTER><IMG SRC="vlan7.gif"></CENTER>
<P>
<CENTER><IMG SRC="vlan4.gif"></CENTER>
<P>
Ein Paket im 802.3-Format wird in ein Format mit einer VLAN-Marke
umgesetzt, indem dieselben vier Bytes (81-00 f&uuml;r Ethertype und die 2-Byte-VLAN-Marke)
wie im Ethernet-Paket hinzugef&uuml;gt wurden. Die L&auml;ngenangabe und weitere
Felder werden analog nach hinten verschoben.<BR>
Auf anderen LANs als 802.3 ist es nicht m&ouml;glich, das Ethernet-Format zu verwenden.
In diesem Fall wird eine andere Kodierung verwendet, um die VLAN-Marke einzuf&uuml;gen.
<P>
Ein Switch kann alle VLANs "lernen", die auf dem Port ver&uuml;gbar sind, der ihn mit
einem anderen Switch verbindet. Er tut dies auf der Grundlage der VLAN-Marken in den
Paketen, die auf diesem Port empfangen werden. Da die Endger&auml;te die VLAN-Marke
nicht verstehen, mu&szlig; der Switch so konfiguriert sein, da&szlig; er niemals ein
Paket mit einer VLAN-Marke zu einem Port sendet, auf dem sich ein Endger&auml;t befinden
k&ouml;nnte. Einige Switch-Anbieter haben einen anbieterspezifischen Mechanismus
zum Informationsaustausch dar&uuml;ber, welche VLANs auf dem Switch-zu-Switch-Port
erreichbar sind. Auf diese Art lernt der Switch die VLANs &uuml;ber explizite
Protokollnachrichten. Bisher existiert jedoch kein Standard daf&uuml;r.
<P>

<CENTER><TABLE BORDER=0 WIDTH="100%">
<TR>
<TD ALIGN=LEFT VALIGN=BOTTOM><IMG SRC="left.gif" BORDER=0> <A HREF="netz6.html">Zum vorhergehenden Abschnitt</A></TD>
<TD ALIGN=CENTER VALIGN=BOTTOM><IMG SRC="up.gif" BORDER=0> <A HREF="index.html">Zum Inhaltsverzeichnis</A></TD>
<TD ALIGN=RIGHT VALIGN=BOTTOM><IMG SRC="right.gif" BORDER=0> <A HREF="twisted.html">Zum n&auml;chsten Abschnitt</A></TD>
</TR></TABLE></CENTER>
<P><HR>
<h6><i>Copyright &copy; Hochschule M&uuml;nchen, FK 04, Prof. J&uuml;rgen Plate</i><br>
Letzte Aktualisierung: <SCRIPT LANGUAGE="JavaScript">document.write(document.lastModified);</SCRIPT></I></H6>
</BODY>
</HTML>